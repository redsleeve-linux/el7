# HG changeset patch
# User shade
# Date 1585332307 -3600
#      Fri Mar 27 19:05:07 2020 +0100
# Node ID af6e51a97af59304b5e5ad41cd3ee344dcc54f0a
# Parent  a51657b8d38904b7d8d6820c8826a65a62959f06
8241750: x86_32 build failure after JDK-8227269
Reviewed-by: rkennke, cjplummer

diff --git a/src/jdk.jdwp.agent/share/native/libjdwp/classTrack.c b/src/jdk.jdwp.agent/share/native/libjdwp/classTrack.c
--- a/src/jdk.jdwp.agent/share/native/libjdwp/classTrack.c
+++ b/src/jdk.jdwp.agent/share/native/libjdwp/classTrack.c
@@ -69,7 +69,7 @@
       debugMonitorExit(classTrackLock);
       return;
     }
-    *(char**)bagAdd(deletedSignatures) = (char*)tag;
+    *(char**)bagAdd(deletedSignatures) = (char*)jlong_to_ptr(tag);
 
     debugMonitorExit(classTrackLock);
 }
@@ -117,7 +117,7 @@
     if (error != JVMTI_ERROR_NONE) {
         EXIT_ERROR(error,"signature");
     }
-    error = JVMTI_FUNC_PTR(trackingEnv, SetTag)(env, klass, (jlong)signature);
+    error = JVMTI_FUNC_PTR(trackingEnv, SetTag)(env, klass, ptr_to_jlong(signature));
     if (error != JVMTI_ERROR_NONE) {
         jvmtiDeallocate(signature);
         EXIT_ERROR(error,"SetTag");
