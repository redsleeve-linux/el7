From 689b4297e60e18f873de23c9ceb73b83509c7d62 Mon Sep 17 00:00:00 2001
From: Jacco Ligthart <jacco@redsleeve.org>
Date: Sat, 2 Jul 2022 04:24:02 +0200
Subject: [PATCH] rebrand for redsleeve

---
 SOURCES/cloud-init-redsleeve-user.patch | 12 ++++++++++++
 SPECS/cloud-init.spec                   |  7 +++++--
 2 files changed, 17 insertions(+), 2 deletions(-)
 create mode 100644 SOURCES/cloud-init-redsleeve-user.patch

diff --git a/SOURCES/cloud-init-redsleeve-user.patch b/SOURCES/cloud-init-redsleeve-user.patch
new file mode 100644
index 0000000..665b156
--- /dev/null
+++ b/SOURCES/cloud-init-redsleeve-user.patch
@@ -0,0 +1,12 @@
+diff -uNrp cloud-init-19.4.orig/rhel/cloud.cfg cloud-init-19.4/rhel/cloud.cfg
+--- cloud-init-19.4.orig/rhel/cloud.cfg	2020-10-13 14:40:36.353779891 +0000
++++ cloud-init-19.4/rhel/cloud.cfg	2020-10-13 14:42:10.121982459 +0000
+@@ -54,7 +54,7 @@ cloud_final_modules:
+ 
+ system_info:
+   default_user:
+-    name: cloud-user
++    name: redsleeve
+     lock_passwd: true
+     gecos: Cloud User
+     groups: [adm, systemd-journal]
diff --git a/SPECS/cloud-init.spec b/SPECS/cloud-init.spec
index 98286db..1d88914 100644
--- a/SPECS/cloud-init.spec
+++ b/SPECS/cloud-init.spec
@@ -13,7 +13,7 @@
 
 Name:           cloud-init
 Version:        19.4
-Release:        7%{?dist}.6
+Release:        7%{?dist}.6.redsleeve
 Summary:        Cloud instance init scripts
 
 Group:          System Environment/Base
@@ -69,7 +69,7 @@ Patch26: ci-Fix-unit-failure-of-cloud-final.service-if-NetworkMa.patch
 # For bz#2003231 - anything above 19.2 of cloud init it fails to assign default route and connect to the meta data service
 Patch27: ci-cloudinit-net-handle-two-different-routes-for-the-sa.patch
 
-Patch9999: cloud-init-centos-user.patch
+Patch9999: cloud-init-redsleeve-user.patch
 
 # Deal with noarch -> arch
 # https://bugzilla.redhat.com/show_bug.cgi?id=1067089
@@ -240,6 +240,9 @@ fi
 %config(noreplace) %{_sysconfdir}/rsyslog.d/21-cloudinit.conf
 
 %changelog
+* Sat Jul 02 2022 Jacco Ligthart <jacco@redsleeve.org 19.4-7.el7.6.redsleeve
+- rebrand for redsleeve
+
 * Mon Jan 24 2022 Jon Maloy <jmaloy@redhat.com> - 19.4-7.el7_9.6
 - ci-cloudinit-net-handle-two-different-routes-for-the-sa.patch [bz#2003231]
 - Resolves: bz#2003231
-- 
1.8.3.1

