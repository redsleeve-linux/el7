From f3abb6697b11f13d66e94d6472667f06af953516 Mon Sep 17 00:00:00 2001
From: Jacco Ligthart <jacco@redsleeve.org>
Date: Wed, 1 Sep 2021 00:10:22 +0200
Subject: [PATCH] rebrand for redsleeve

---
 SOURCES/cloud-init-redsleeve-user.patch | 12 ++++++++++++
 SPECS/cloud-init.spec                   |  7 +++++--
 2 files changed, 17 insertions(+), 2 deletions(-)
 create mode 100644 SOURCES/cloud-init-redsleeve-user.patch

diff --git a/SOURCES/cloud-init-redsleeve-user.patch b/SOURCES/cloud-init-redsleeve-user.patch
new file mode 100644
index 0000000..665b156
--- /dev/null
+++ b/SOURCES/cloud-init-redsleeve-user.patch
@@ -0,0 +1,12 @@
+diff -uNrp cloud-init-19.4.orig/rhel/cloud.cfg cloud-init-19.4/rhel/cloud.cfg
+--- cloud-init-19.4.orig/rhel/cloud.cfg	2020-10-13 14:40:36.353779891 +0000
++++ cloud-init-19.4/rhel/cloud.cfg	2020-10-13 14:42:10.121982459 +0000
+@@ -54,7 +54,7 @@ cloud_final_modules:
+ 
+ system_info:
+   default_user:
+-    name: cloud-user
++    name: redsleeve
+     lock_passwd: true
+     gecos: Cloud User
+     groups: [adm, systemd-journal]
diff --git a/SPECS/cloud-init.spec b/SPECS/cloud-init.spec
index 865b2f2..94bfd1a 100644
--- a/SPECS/cloud-init.spec
+++ b/SPECS/cloud-init.spec
@@ -13,7 +13,7 @@
 
 Name:           cloud-init
 Version:        19.4
-Release:        7%{?dist}.5
+Release:        7%{?dist}.5.redsleeve
 Summary:        Cloud instance init scripts
 
 Group:          System Environment/Base
@@ -67,7 +67,7 @@ Patch25: ci-DataSourceAzure-update-password-for-defuser-if-exist.patch
 # For bz#1897616 - [rhel-7]cloud-final.service fails if NetworkManager not installed.
 Patch26: ci-Fix-unit-failure-of-cloud-final.service-if-NetworkMa.patch
 
-Patch9999: cloud-init-centos-user.patch
+Patch9999: cloud-init-redsleeve-user.patch
 
 # Deal with noarch -> arch
 # https://bugzilla.redhat.com/show_bug.cgi?id=1067089
@@ -238,6 +238,9 @@ fi
 %config(noreplace) %{_sysconfdir}/rsyslog.d/21-cloudinit.conf
 
 %changelog
+* Tue Aug 31 2021 Jacco Ligthart <jacco@redsleeve.org 19.4-7.el7.5.redsleeve
+- rebrand for redsleeve
+
 * Tue Jun 29 2021 Miroslav Rezanina <mrezanin@redhat.com> - 19.4-7.el7_9.5
 - ci-Fix-unit-failure-of-cloud-final.service-if-NetworkMa.patch [bz#1897616]
 - Resolves: bz#1897616
-- 
1.8.3.1

