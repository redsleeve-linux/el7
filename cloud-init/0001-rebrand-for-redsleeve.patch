From 33033d36869d210bd20c1d0301044a415bafef09 Mon Sep 17 00:00:00 2001
From: Jacco Ligthart <jacco@redsleeve.org>
Date: Thu, 15 Oct 2020 01:48:30 +0200
Subject: [PATCH] rebrand for redsleeve

---
 SOURCES/cloud-init-redsleeve-user.patch | 12 ++++++++++++
 SPECS/cloud-init.spec                   |  7 +++++--
 2 files changed, 17 insertions(+), 2 deletions(-)
 create mode 100644 SOURCES/cloud-init-redsleeve-user.patch

diff --git a/SOURCES/cloud-init-redsleeve-user.patch b/SOURCES/cloud-init-redsleeve-user.patch
new file mode 100644
index 0000000..665b156
--- /dev/null
+++ b/SOURCES/cloud-init-redsleeve-user.patch
@@ -0,0 +1,12 @@
+diff -uNrp cloud-init-19.4.orig/rhel/cloud.cfg cloud-init-19.4/rhel/cloud.cfg
+--- cloud-init-19.4.orig/rhel/cloud.cfg	2020-10-13 14:40:36.353779891 +0000
++++ cloud-init-19.4/rhel/cloud.cfg	2020-10-13 14:42:10.121982459 +0000
+@@ -54,7 +54,7 @@ cloud_final_modules:
+ 
+ system_info:
+   default_user:
+-    name: cloud-user
++    name: redsleeve
+     lock_passwd: true
+     gecos: Cloud User
+     groups: [adm, systemd-journal]
diff --git a/SPECS/cloud-init.spec b/SPECS/cloud-init.spec
index f8ac672..790f28f 100644
--- a/SPECS/cloud-init.spec
+++ b/SPECS/cloud-init.spec
@@ -13,7 +13,7 @@
 
 Name:           cloud-init
 Version:        19.4
-Release:        7%{?dist}
+Release:        7%{?dist}.redsleeve
 Summary:        Cloud instance init scripts
 
 Group:          System Environment/Base
@@ -55,7 +55,7 @@ Patch19: ci-ec2-Do-not-log-IMDSv2-token-values-instead-use-REDAC.patch
 # For bz#1821999 - [RHEL7.9] Do not log IMDSv2 token values into cloud-init.log
 Patch20: ci-ec2-only-redact-token-request-headers-in-logs-avoid-.patch
 
-Patch9999: cloud-init-centos-user.patch
+Patch9999: cloud-init-redsleeve-user.patch
 
 # Deal with noarch -> arch
 # https://bugzilla.redhat.com/show_bug.cgi?id=1067089
@@ -226,6 +226,9 @@ fi
 %config(noreplace) %{_sysconfdir}/rsyslog.d/21-cloudinit.conf
 
 %changelog
+* Wed Oct 14 2020 Jacco Ligthart <jacco@redsleeve.org 19.4-7.el7.redsleeve
+- rebrand for redsleeve
+
 * Wed May 20 2020 Miroslav Rezanina <mrezanin@redhat.com> - 19.4-7.el7
 - ci-ec2-only-redact-token-request-headers-in-logs-avoid-.patch [bz#1821999]
 - Resolves: bz#1821999
-- 
1.8.3.1

