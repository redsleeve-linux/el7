From e640e655c619312e19d3daf940a218477b95a39b Mon Sep 17 00:00:00 2001
From: Jacco Ligthart <jacco@redsleeve.org>
Date: Sat, 20 Mar 2021 23:28:02 +0100
Subject: [PATCH] rebrand for redsleeve

---
 SOURCES/cloud-init-redsleeve-user.patch | 12 ++++++++++++
 SPECS/cloud-init.spec                   |  7 +++++--
 2 files changed, 17 insertions(+), 2 deletions(-)
 create mode 100644 SOURCES/cloud-init-redsleeve-user.patch

diff --git a/SOURCES/cloud-init-redsleeve-user.patch b/SOURCES/cloud-init-redsleeve-user.patch
new file mode 100644
index 0000000..665b156
--- /dev/null
+++ b/SOURCES/cloud-init-redsleeve-user.patch
@@ -0,0 +1,12 @@
+diff -uNrp cloud-init-19.4.orig/rhel/cloud.cfg cloud-init-19.4/rhel/cloud.cfg
+--- cloud-init-19.4.orig/rhel/cloud.cfg	2020-10-13 14:40:36.353779891 +0000
++++ cloud-init-19.4/rhel/cloud.cfg	2020-10-13 14:42:10.121982459 +0000
+@@ -54,7 +54,7 @@ cloud_final_modules:
+ 
+ system_info:
+   default_user:
+-    name: cloud-user
++    name: redsleeve
+     lock_passwd: true
+     gecos: Cloud User
+     groups: [adm, systemd-journal]
diff --git a/SPECS/cloud-init.spec b/SPECS/cloud-init.spec
index 8702f9f..970277b 100644
--- a/SPECS/cloud-init.spec
+++ b/SPECS/cloud-init.spec
@@ -13,7 +13,7 @@
 
 Name:           cloud-init
 Version:        19.4
-Release:        7%{?dist}.4
+Release:        7%{?dist}.4.redsleeve
 Summary:        Cloud instance init scripts
 
 Group:          System Environment/Base
@@ -65,7 +65,7 @@ Patch24: ci-network-Fix-type-and-respect-name-when-rendering-vla.patch
 # For bz#1900807 - Update existing user password RHEL7x
 Patch25: ci-DataSourceAzure-update-password-for-defuser-if-exist.patch
 
-Patch9999: cloud-init-centos-user.patch
+Patch9999: cloud-init-redsleeve-user.patch
 
 # Deal with noarch -> arch
 # https://bugzilla.redhat.com/show_bug.cgi?id=1067089
@@ -236,6 +236,9 @@ fi
 %config(noreplace) %{_sysconfdir}/rsyslog.d/21-cloudinit.conf
 
 %changelog
+* Sat Mar 20 2021 Jacco Ligthart <jacco@redsleeve.org 19.4-7.el7.4.redsleeve
+- rebrand for redsleeve
+
 * Tue Feb 16 2021 Jon Maloy <jmaloy@redhat.com> - 19.4-7.el7_9.4
 - ci-DataSourceAzure-update-password-for-defuser-if-exist.patch [bz#1900807]
 - Resolves: bz#1900807
-- 
1.8.3.1

