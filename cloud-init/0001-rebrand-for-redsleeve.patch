From 1e3187a825f50f095de91c36fb8b30ac5028bc9c Mon Sep 17 00:00:00 2001
From: Jacco Ligthart <jacco@redsleeve.org>
Date: Thu, 8 Nov 2018 23:32:03 +0100
Subject: [PATCH] rebrand for redsleeve

---
 SOURCES/cloud-init-redsleeve-user.patch | 12 ++++++++++++
 SPECS/cloud-init.spec                   |  7 +++++--
 2 files changed, 17 insertions(+), 2 deletions(-)
 create mode 100644 SOURCES/cloud-init-redsleeve-user.patch

diff --git a/SOURCES/cloud-init-redsleeve-user.patch b/SOURCES/cloud-init-redsleeve-user.patch
new file mode 100644
index 0000000..8311704
--- /dev/null
+++ b/SOURCES/cloud-init-redsleeve-user.patch
@@ -0,0 +1,12 @@
+diff -uNrp cloud-init-18.2.orig/rhel/cloud.cfg cloud-init-18.2/rhel/cloud.cfg
+--- cloud-init-18.2.orig/rhel/cloud.cfg	2018-11-04 15:38:13.763701007 +0000
++++ cloud-init-18.2/rhel/cloud.cfg	2018-11-04 15:41:06.934576619 +0000
+@@ -52,7 +52,7 @@ cloud_final_modules:
+ 
+ system_info:
+   default_user:
+-    name: cloud-user
++    name: redsleeve
+     lock_passwd: true
+     gecos: Cloud User
+     groups: [wheel, adm, systemd-journal]
diff --git a/SPECS/cloud-init.spec b/SPECS/cloud-init.spec
index 4f3b5a0..2593702 100644
--- a/SPECS/cloud-init.spec
+++ b/SPECS/cloud-init.spec
@@ -7,7 +7,7 @@
 
 Name:           cloud-init
 Version:        18.2
-Release:        1%{?dist}.1
+Release:        1%{?dist}.1.redsleeve
 Summary:        Cloud instance init scripts
 
 Group:          System Environment/Base
@@ -34,7 +34,7 @@ Patch12: ci-azure-Add-reported-ready-marker-file.patch
 # For bz#1633282 - [Azure] cloud-init fails to mount /dev/sdb1 after stop(deallocate)&&start VM
 Patch13: ci-Adding-disk_setup-to-rhel-cloud.cfg.patch
 
-Patch9999: cloud-init-centos-user.patch 
+Patch9999: cloud-init-redsleeve-user.patch 
 
 # Deal with noarch -> arch
 # https://bugzilla.redhat.com/show_bug.cgi?id=1067089
@@ -187,6 +187,9 @@ fi
 %config(noreplace) %{_sysconfdir}/rsyslog.d/21-cloudinit.conf
 
 %changelog
+* Thu Nov 08 2018 Jacco Ligthart <jacco@redsleeve.org 18.2-1.el7_6.1.redsleeve
+- rebrand for redsleeve
+
 * Thu Sep 27 2018 Miroslav Rezanina <mrezanin@redhat.com> - 18.2-1.el7_6.1
 - ci-Adding-systemd-mount-options-to-wait-for-cloud-init.patch [bz#1633282]
 - ci-Azure-Ignore-NTFS-mount-errors-when-checking-ephemer.patch [bz#1633282]
-- 
1.8.3.1

