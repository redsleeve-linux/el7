From aa9c3728755d05264de287ef4cdcfbb16eedd139 Mon Sep 17 00:00:00 2001
Message-Id: <aa9c3728755d05264de287ef4cdcfbb16eedd139@dist-git>
From: Peter Krempa <pkrempa@redhat.com>
Date: Wed, 24 Aug 2016 16:10:42 -0400
Subject: [PATCH] qemu: caps: Always assume QEMU_CAPS_SMP_TOPOLOGY

https://bugzilla.redhat.com/show_bug.cgi?id=1097930
https://bugzilla.redhat.com/show_bug.cgi?id=1224341

Support for SMP topology was added by qemu commit dc6b1c09849484fbbc50
prior to 0.12.0, our minimum supported qemu version.

$ git describe --tags dc6b1c09849484fbbc50803307e4c7a3d81eab62
v0.11.0-rc0-449-gdc6b1c0
$ git describe --tags --contains dc6b1c09849484fbbc50803307e4c7a3d81eab
v0.12.0-rc0~1477

(cherry picked from commit e114b09157b7fcca12b218b531debfbc0c3a09d7)

    Conflicts and changes: various test cases added after this commit
    landed upstream were backported prior to this patch. I've removed
    a few instances of QEMU_CAPS_SMP_TOPOLOGY added by them and fixed
    all the test cases not having the topology specified.
---
 src/qemu/qemu_capabilities.c                       |  5 ---
 src/qemu/qemu_capabilities.h                       |  2 +-
 src/qemu/qemu_command.c                            | 40 ++++++++--------------
 tests/qemucapabilitiesdata/caps_1.2.2.x86_64.xml   |  1 -
 tests/qemucapabilitiesdata/caps_1.3.1.x86_64.xml   |  1 -
 tests/qemucapabilitiesdata/caps_1.4.2.x86_64.xml   |  1 -
 tests/qemucapabilitiesdata/caps_1.5.3.x86_64.xml   |  1 -
 tests/qemucapabilitiesdata/caps_1.6.0.x86_64.xml   |  1 -
 tests/qemucapabilitiesdata/caps_1.7.0.x86_64.xml   |  1 -
 tests/qemucapabilitiesdata/caps_2.1.1.x86_64.xml   |  1 -
 tests/qemucapabilitiesdata/caps_2.4.0.x86_64.xml   |  1 -
 tests/qemucapabilitiesdata/caps_2.5.0.x86_64.xml   |  1 -
 .../caps_2.6.0-gicv2.aarch64.xml                   |  1 -
 .../caps_2.6.0-gicv3.aarch64.xml                   |  1 -
 tests/qemucapabilitiesdata/caps_2.6.0.ppc64le.xml  |  1 -
 tests/qemucapabilitiesdata/caps_2.6.0.x86_64.xml   |  1 -
 tests/qemuhelptest.c                               |  8 -----
 .../qemuxml2argv-aarch64-aavmf-virtio-mmio.args    |  2 +-
 .../qemuxml2argv-aarch64-cpu-passthrough.args      |  2 +-
 .../qemuxml2argv-aarch64-gic-host.args             |  2 +-
 .../qemuxml2argv-aarch64-gic-v2.args               |  2 +-
 .../qemuxml2argv-aarch64-gic-v3.args               |  2 +-
 .../qemuxml2argv-aarch64-kvm-32-on-64.args         |  2 +-
 ...l2argv-aarch64-virt-2.6-virtio-pci-default.args |  2 +-
 .../qemuxml2argv-aarch64-virt-default-nic.args     |  2 +-
 .../qemuxml2argv-aarch64-virt-virtio.args          |  2 +-
 .../qemuxml2argv-aarch64-virtio-pci-default.args   |  2 +-
 ...l2argv-aarch64-virtio-pci-manual-addresses.args |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-acpi-table.args  |  2 +-
 .../qemuxml2argv-arm-vexpressa9-basic.args         |  2 +-
 .../qemuxml2argv-arm-vexpressa9-nodevs.args        |  2 +-
 .../qemuxml2argv-arm-vexpressa9-virtio.args        |  2 +-
 .../qemuxml2argv-arm-virt-virtio.args              |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-autoindex.args |  2 +-
 .../qemuxml2argv-balloon-ccw-deflate.args          |  2 +-
 .../qemuxml2argv-balloon-device-auto.args          |  2 +-
 .../qemuxml2argv-balloon-device-deflate-off.args   |  2 +-
 .../qemuxml2argv-balloon-device-deflate.args       |  2 +-
 .../qemuxml2argv-balloon-device-period.args        |  2 +-
 .../qemuxml2argv-balloon-device.args               |  2 +-
 .../qemuxml2argv-balloon-mmio-deflate.args         |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-bios-nvram.args  |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-bios.args      |  2 +-
 .../qemuxml2argv-blkdeviotune-max.args             |  2 +-
 .../qemuxml2argv-blkdeviotune.args                 |  2 +-
 .../qemuxml2argv-blkiotune-device.args             |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-blkiotune.args |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-boot-cdrom.args  |  2 +-
 .../qemuxml2argv-boot-complex-bootindex.args       |  2 +-
 .../qemuxml2argv-boot-complex.args                 |  2 +-
 .../qemuxml2argv-boot-floppy-q35.args              |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-boot-floppy.args |  2 +-
 ...xml2argv-boot-menu-disable-drive-bootindex.args |  2 +-
 .../qemuxml2argv-boot-menu-disable-drive.args      |  2 +-
 .../qemuxml2argv-boot-menu-disable.args            |  2 +-
 .../qemuxml2argv-boot-menu-enable-bootindex.args   |  2 +-
 ...qemuxml2argv-boot-menu-enable-with-timeout.args |  2 +-
 .../qemuxml2argv-boot-menu-enable.args             |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-boot-multi.args  |  2 +-
 .../qemuxml2argv-boot-network.args                 |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-boot-order.args  |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-boot-strict.args |  2 +-
 .../qemuxml2argv-bootindex-floppy-q35.args         |  2 +-
 .../qemuxml2argv-channel-guestfwd.args             |  2 +-
 .../qemuxml2argv-channel-spicevmc-old.args         |  2 +-
 .../qemuxml2argv-channel-spicevmc.args             |  2 +-
 .../qemuxml2argv-channel-virtio-auto.args          |  2 +-
 .../qemuxml2argv-channel-virtio-autoadd.args       |  2 +-
 .../qemuxml2argv-channel-virtio-autoassign.args    |  2 +-
 .../qemuxml2argv-channel-virtio-default.args       |  2 +-
 .../qemuxml2argv-channel-virtio-state.args         |  2 +-
 .../qemuxml2argv-channel-virtio-unix.args          |  2 +-
 .../qemuxml2argv-channel-virtio.args               |  2 +-
 .../qemuxml2argv-clock-catchup.args                |  2 +-
 .../qemuxml2argv-clock-france.args                 |  2 +-
 .../qemuxml2argv-clock-hpet-off.args               |  2 +-
 ...muxml2argv-clock-localtime-basis-localtime.args |  2 +-
 .../qemuxml2argv-clock-localtime.args              |  2 +-
 .../qemuxml2argv-clock-timer-hyperv-rtc.args       |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-clock-utc.args |  2 +-
 .../qemuxml2argv-clock-variable.args               |  2 +-
 .../qemuxml2argv-console-compat-auto.args          |  2 +-
 .../qemuxml2argv-console-compat-chardev.args       |  2 +-
 .../qemuxml2argv-console-compat.args               |  2 +-
 .../qemuxml2argv-console-sclp.args                 |  2 +-
 .../qemuxml2argv-console-virtio-ccw.args           |  2 +-
 .../qemuxml2argv-console-virtio-many.args          |  2 +-
 .../qemuxml2argv-console-virtio-s390.args          |  2 +-
 .../qemuxml2argv-console-virtio.args               |  2 +-
 .../qemuxml2argv-controller-order.args             |  2 +-
 .../qemuxml2argv-cpu-Haswell-noTSX.args            |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-cpu-Haswell.args |  2 +-
 .../qemuxml2argv-cpu-Haswell2.args                 |  2 +-
 .../qemuxml2argv-cpu-Haswell3.args                 |  2 +-
 .../qemuxml2argv-cpu-eoi-disabled.args             |  2 +-
 .../qemuxml2argv-cpu-eoi-enabled.args              |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-cpu-exact1.args  |  2 +-
 .../qemuxml2argv-cpu-exact2-nofallback.args        |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-cpu-exact2.args  |  2 +-
 .../qemuxml2argv-cpu-fallback.args                 |  2 +-
 .../qemuxml2argv-cpu-host-kvmclock.args            |  2 +-
 .../qemuxml2argv-cpu-host-model-cmt.args           |  2 +-
 .../qemuxml2argv-cpu-host-model-fallback.args      |  2 +-
 .../qemuxml2argv-cpu-host-model-vendor.args        |  2 +-
 .../qemuxml2argv-cpu-host-model.args               |  2 +-
 ...qemuxml2argv-cpu-host-passthrough-features.args |  2 +-
 .../qemuxml2argv-cpu-host-passthrough.args         |  2 +-
 .../qemuxml2argv-cpu-kvmclock.args                 |  2 +-
 .../qemuxml2argv-cpu-minimum1.args                 |  2 +-
 .../qemuxml2argv-cpu-minimum2.args                 |  2 +-
 .../qemuxml2argv-cpu-numa-disjoint.args            |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-cpu-numa1.args |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-cpu-strict1.args |  2 +-
 .../qemuxml2argv-cpu-topology3.args                |  2 +-
 .../qemuxml2argv-cputune-zero-shares.args          |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-cputune.args   |  2 +-
 .../qemuxml2argv-debug-threads.args                |  2 +-
 .../qemuxml2argv-default-kvm-host-arch.args        |  2 +-
 .../qemuxml2argv-default-qemu-host-arch.args       |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-disk-aio.args  |  2 +-
 .../qemuxml2argv-disk-blockio.args                 |  2 +-
 .../qemuxml2argv-disk-cdrom-empty.args             |  2 +-
 .../qemuxml2argv-disk-cdrom-network-ftp.args       |  2 +-
 .../qemuxml2argv-disk-cdrom-network-ftps.args      |  2 +-
 .../qemuxml2argv-disk-cdrom-network-http.args      |  2 +-
 .../qemuxml2argv-disk-cdrom-network-https.args     |  2 +-
 .../qemuxml2argv-disk-cdrom-network-tftp.args      |  2 +-
 ...qemuxml2argv-disk-cdrom-tray-no-device-cap.args |  2 +-
 .../qemuxml2argv-disk-cdrom-tray.args              |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-disk-cdrom.args  |  2 +-
 .../qemuxml2argv-disk-copy_on_read.args            |  2 +-
 .../qemuxml2argv-disk-drive-boot-cdrom.args        |  2 +-
 .../qemuxml2argv-disk-drive-boot-disk.args         |  2 +-
 .../qemuxml2argv-disk-drive-cache-directsync.args  |  2 +-
 .../qemuxml2argv-disk-drive-cache-unsafe.args      |  2 +-
 .../qemuxml2argv-disk-drive-cache-v2-none.args     |  2 +-
 .../qemuxml2argv-disk-drive-cache-v2-wb.args       |  2 +-
 .../qemuxml2argv-disk-drive-cache-v2-wt.args       |  2 +-
 .../qemuxml2argv-disk-drive-copy-on-read.args      |  2 +-
 .../qemuxml2argv-disk-drive-detect-zeroes.args     |  2 +-
 .../qemuxml2argv-disk-drive-discard.args           |  2 +-
 ...uxml2argv-disk-drive-error-policy-enospace.args |  2 +-
 .../qemuxml2argv-disk-drive-error-policy-stop.args |  2 +-
 ...gv-disk-drive-error-policy-wreport-rignore.args |  2 +-
 .../qemuxml2argv-disk-drive-fmt-qcow.args          |  2 +-
 .../qemuxml2argv-disk-drive-network-gluster.args   |  2 +-
 ...qemuxml2argv-disk-drive-network-iscsi-auth.args |  2 +-
 .../qemuxml2argv-disk-drive-network-iscsi-lun.args |  2 +-
 .../qemuxml2argv-disk-drive-network-iscsi.args     |  2 +-
 ...qemuxml2argv-disk-drive-network-nbd-export.args |  2 +-
 ...ml2argv-disk-drive-network-nbd-ipv6-export.args |  2 +-
 .../qemuxml2argv-disk-drive-network-nbd-ipv6.args  |  2 +-
 .../qemuxml2argv-disk-drive-network-nbd-unix.args  |  2 +-
 .../qemuxml2argv-disk-drive-network-nbd.args       |  2 +-
 ...muxml2argv-disk-drive-network-rbd-auth-AES.args |  2 +-
 .../qemuxml2argv-disk-drive-network-rbd-auth.args  |  2 +-
 .../qemuxml2argv-disk-drive-network-rbd-ipv6.args  |  2 +-
 .../qemuxml2argv-disk-drive-network-rbd.args       |  2 +-
 .../qemuxml2argv-disk-drive-network-sheepdog.args  |  2 +-
 .../qemuxml2argv-disk-drive-no-boot.args           |  2 +-
 .../qemuxml2argv-disk-drive-readonly-disk.args     |  2 +-
 ...qemuxml2argv-disk-drive-readonly-no-device.args |  2 +-
 .../qemuxml2argv-disk-drive-shared.args            |  2 +-
 ...emuxml2argv-disk-floppy-tray-no-device-cap.args |  2 +-
 .../qemuxml2argv-disk-floppy-tray.args             |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-disk-floppy.args |  2 +-
 .../qemuxml2argv-disk-geometry.args                |  2 +-
 .../qemuxml2argv-disk-ide-drive-split.args         |  2 +-
 .../qemuxml2argv-disk-ide-wwn.args                 |  2 +-
 .../qemuxml2argv-disk-ioeventfd.args               |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-disk-iscsi.args  |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-disk-many.args |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-disk-order.args  |  2 +-
 .../qemuxml2argv-disk-sata-device.args             |  2 +-
 .../qemuxml2argv-disk-scsi-device-auto.args        |  2 +-
 .../qemuxml2argv-disk-scsi-device.args             |  2 +-
 .../qemuxml2argv-disk-scsi-disk-split.args         |  2 +-
 .../qemuxml2argv-disk-scsi-disk-vpd.args           |  2 +-
 .../qemuxml2argv-disk-scsi-disk-wwn.args           |  2 +-
 .../qemuxml2argv-disk-scsi-lun-passthrough.args    |  2 +-
 .../qemuxml2argv-disk-scsi-megasas.args            |  2 +-
 .../qemuxml2argv-disk-scsi-mptsas1068.args         |  2 +-
 .../qemuxml2argv-disk-scsi-virtio-scsi.args        |  2 +-
 .../qemuxml2argv-disk-scsi-vscsi.args              |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-disk-serial.args |  2 +-
 .../qemuxml2argv-disk-snapshot.args                |  2 +-
 .../qemuxml2argv-disk-source-pool-mode.args        |  2 +-
 .../qemuxml2argv-disk-source-pool.args             |  2 +-
 .../qemuxml2argv-disk-usb-device-removable.args    |  2 +-
 .../qemuxml2argv-disk-usb-device.args              |  2 +-
 .../qemuxml2argv-disk-virtio-ccw-many.args         |  2 +-
 .../qemuxml2argv-disk-virtio-ccw.args              |  2 +-
 .../qemuxml2argv-disk-virtio-s390.args             |  2 +-
 .../qemuxml2argv-disk-virtio-scsi-ccw.args         |  2 +-
 .../qemuxml2argv-disk-virtio-scsi-cmd_per_lun.args |  2 +-
 .../qemuxml2argv-disk-virtio-scsi-ioeventfd.args   |  2 +-
 .../qemuxml2argv-disk-virtio-scsi-max_sectors.args |  2 +-
 .../qemuxml2argv-disk-virtio-scsi-num_queues.args  |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-disk-virtio.args |  2 +-
 .../qemuxml2argv-encrypted-disk-usage.args         |  2 +-
 .../qemuxml2argv-encrypted-disk.args               |  2 +-
 .../qemuxml2argv-eoi-disabled.args                 |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-eoi-enabled.args |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-event_idx.args |  2 +-
 .../qemuxml2argv-fips-enabled.args                 |  2 +-
 .../qemuxml2argv-floppy-drive-fat.args             |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-fs9p-ccw.args  |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-fs9p.args      |  2 +-
 .../qemuxml2argv-graphics-sdl-fullscreen.args      |  2 +-
 .../qemuxml2argv-graphics-sdl.args                 |  2 +-
 ...emuxml2argv-graphics-spice-agent-file-xfer.args |  2 +-
 .../qemuxml2argv-graphics-spice-agentmouse.args    |  2 +-
 ...emuxml2argv-graphics-spice-auto-socket-cfg.args |  2 +-
 .../qemuxml2argv-graphics-spice-auto-socket.args   |  2 +-
 .../qemuxml2argv-graphics-spice-compression.args   |  2 +-
 .../qemuxml2argv-graphics-spice-no-args.args       |  2 +-
 .../qemuxml2argv-graphics-spice-qxl-vga.args       |  2 +-
 .../qemuxml2argv-graphics-spice-sasl.args          |  2 +-
 .../qemuxml2argv-graphics-spice-socket.args        |  2 +-
 .../qemuxml2argv-graphics-spice-timeout.args       |  2 +-
 .../qemuxml2argv-graphics-spice-usb-redir.args     |  2 +-
 .../qemuxml2argv-graphics-spice.args               |  2 +-
 .../qemuxml2argv-graphics-vnc-auto-socket-cfg.args |  2 +-
 .../qemuxml2argv-graphics-vnc-auto-socket.args     |  2 +-
 .../qemuxml2argv-graphics-vnc-no-listen-attr.args  |  2 +-
 .../qemuxml2argv-graphics-vnc-none.args            |  2 +-
 .../qemuxml2argv-graphics-vnc-policy.args          |  2 +-
 ...2argv-graphics-vnc-remove-generated-socket.args |  2 +-
 .../qemuxml2argv-graphics-vnc-sasl.args            |  2 +-
 .../qemuxml2argv-graphics-vnc-socket.args          |  2 +-
 .../qemuxml2argv-graphics-vnc-tls.args             |  2 +-
 .../qemuxml2argv-graphics-vnc-websocket.args       |  2 +-
 .../qemuxml2argv-graphics-vnc.args                 |  2 +-
 .../qemuxml2argv-hostdev-pci-address-device.args   |  2 +-
 .../qemuxml2argv-hostdev-pci-address.args          |  2 +-
 .../qemuxml2argv-hostdev-scsi-lsi-iscsi-auth.args  |  2 +-
 .../qemuxml2argv-hostdev-scsi-lsi-iscsi.args       |  2 +-
 .../qemuxml2argv-hostdev-scsi-lsi.args             |  2 +-
 .../qemuxml2argv-hostdev-scsi-readonly.args        |  2 +-
 ...emuxml2argv-hostdev-scsi-virtio-iscsi-auth.args |  2 +-
 .../qemuxml2argv-hostdev-scsi-virtio-iscsi.args    |  2 +-
 .../qemuxml2argv-hostdev-scsi-virtio-scsi.args     |  2 +-
 ...muxml2argv-hostdev-usb-address-device-boot.args |  2 +-
 .../qemuxml2argv-hostdev-usb-address-device.args   |  2 +-
 .../qemuxml2argv-hostdev-usb-address.args          |  2 +-
 .../qemuxml2argv-hostdev-vfio-multidomain.args     |  2 +-
 .../qemuxml2argv-hostdev-vfio.args                 |  2 +-
 .../qemuxml2argv-hotplug-base.args                 |  2 +-
 .../qemuxml2argv-hugepages-numa.args               |  2 +-
 .../qemuxml2argv-hugepages-pages.args              |  2 +-
 .../qemuxml2argv-hugepages-pages2.args             |  2 +-
 .../qemuxml2argv-hugepages-pages3.args             |  2 +-
 .../qemuxml2argv-hugepages-pages5.args             |  2 +-
 .../qemuxml2argv-hugepages-pages6.args             |  2 +-
 .../qemuxml2argv-hugepages-shared.args             |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-hugepages.args |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-hyperv-off.args  |  2 +-
 .../qemuxml2argv-hyperv-panic.args                 |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-hyperv.args    |  2 +-
 .../qemuxml2argv-input-usbmouse-addr.args          |  2 +-
 .../qemuxml2argv-input-usbmouse.args               |  2 +-
 .../qemuxml2argv-input-usbtablet.args              |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-intel-iommu.args |  2 +-
 .../qemuxml2argv-iothreads-disk-virtio-ccw.args    |  2 +-
 .../qemuxml2argv-iothreads-disk.args               |  2 +-
 .../qemuxml2argv-iothreads-ids-partial.args        |  2 +-
 .../qemuxml2argv-iothreads-ids.args                |  2 +-
 .../qemuxml2argv-iothreads-virtio-scsi-ccw.args    |  2 +-
 .../qemuxml2argv-iothreads-virtio-scsi-pci.args    |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-iothreads.args |  2 +-
 .../qemuxml2argv-kvm-features-off.args             |  2 +-
 .../qemuxml2argv-kvm-features.args                 |  2 +-
 .../qemuxml2argv-kvm-pit-delay.args                |  2 +-
 .../qemuxml2argv-kvm-pit-device.args               |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-kvm.args       |  2 +-
 .../qemuxml2argv-kvmclock+eoi-disabled.args        |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-kvmclock.args  |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-luks-disks.args  |  2 +-
 .../qemuxml2argv-machine-aeskeywrap-off-cap.args   |  2 +-
 .../qemuxml2argv-machine-aeskeywrap-off-caps.args  |  2 +-
 .../qemuxml2argv-machine-aeskeywrap-on-cap.args    |  2 +-
 .../qemuxml2argv-machine-aeskeywrap-on-caps.args   |  2 +-
 .../qemuxml2argv-machine-aliases1.args             |  2 +-
 .../qemuxml2argv-machine-aliases2.args             |  2 +-
 .../qemuxml2argv-machine-core-off.args             |  2 +-
 .../qemuxml2argv-machine-core-on.args              |  2 +-
 .../qemuxml2argv-machine-deakeywrap-off-cap.args   |  2 +-
 .../qemuxml2argv-machine-deakeywrap-off-caps.args  |  2 +-
 .../qemuxml2argv-machine-deakeywrap-on-cap.args    |  2 +-
 .../qemuxml2argv-machine-deakeywrap-on-caps.args   |  2 +-
 .../qemuxml2argv-machine-keywrap-none-caps.args    |  2 +-
 .../qemuxml2argv-machine-keywrap-none.args         |  2 +-
 .../qemuxml2argv-machine-usb-opt.args              |  2 +-
 .../qemuxml2argv-machine-vmport-opt.args           |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-master-key.args  |  2 +-
 .../qemuxml2argv-memory-hotplug-dimm-addr.args     |  2 +-
 .../qemuxml2argv-memory-hotplug-dimm.args          |  2 +-
 .../qemuxml2argv-memory-hotplug-ppc64-nonuma.args  |  2 +-
 .../qemuxml2argv-memory-hotplug.args               |  2 +-
 .../qemuxml2argv-memtune-unlimited.args            |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-memtune.args   |  2 +-
 .../qemuxml2argv-migrate-numa-unaligned.args       |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-migrate.args   |  2 +-
 .../qemuxml2argv-minimal-msg-timestamp.args        |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-minimal.args   |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-misc-acpi.args |  2 +-
 .../qemuxml2argv-misc-disable-s3.args              |  2 +-
 .../qemuxml2argv-misc-disable-suspends.args        |  2 +-
 .../qemuxml2argv-misc-enable-s4.args               |  2 +-
 .../qemuxml2argv-misc-no-reboot.args               |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-misc-uuid.args |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-mlock-off.args |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-mlock-on.args  |  2 +-
 .../qemuxml2argv-mlock-unsupported.args            |  2 +-
 .../qemuxml2argv-monitor-json.args                 |  2 +-
 .../qemuxml2argv-multifunction-pci-device.args     |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-name-escape.args |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-net-client.args  |  2 +-
 .../qemuxml2argv-net-eth-ifname.args               |  2 +-
 .../qemuxml2argv-net-eth-names.args                |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-net-eth.args   |  2 +-
 .../qemuxml2argv-net-hostdev-multidomain.args      |  2 +-
 .../qemuxml2argv-net-hostdev-vfio-multidomain.args |  2 +-
 .../qemuxml2argv-net-hostdev-vfio.args             |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-net-hostdev.args |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-net-mcast.args |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-net-server.args  |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-net-udp.args   |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-net-user.args  |  2 +-
 .../qemuxml2argv-net-vhostuser-multiq.args         |  2 +-
 .../qemuxml2argv-net-vhostuser.args                |  2 +-
 .../qemuxml2argv-net-virtio-ccw.args               |  2 +-
 .../qemuxml2argv-net-virtio-device.args            |  2 +-
 .../qemuxml2argv-net-virtio-disable-offloads.args  |  2 +-
 .../qemuxml2argv-net-virtio-netdev.args            |  2 +-
 .../qemuxml2argv-net-virtio-s390.args              |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-net-virtio.args  |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-no-shutdown.args |  2 +-
 .../qemuxml2argv-nographics-vga.args               |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-nographics.args  |  2 +-
 .../qemuxml2argv-nosharepages.args                 |  2 +-
 ...qemuxml2argv-numad-auto-memory-vcpu-cpuset.args |  2 +-
 ...d-auto-memory-vcpu-no-cpuset-and-placement.args |  2 +-
 ...muxml2argv-numad-auto-vcpu-static-numatune.args |  2 +-
 ...qemuxml2argv-numad-static-memory-auto-vcpu.args |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-numad.args     |  2 +-
 ...qemuxml2argv-numatune-auto-nodeset-invalid.args |  2 +-
 .../qemuxml2argv-numatune-auto-prefer.args         |  2 +-
 .../qemuxml2argv-numatune-memnode-no-memory.args   |  2 +-
 .../qemuxml2argv-numatune-memnode.args             |  2 +-
 .../qemuxml2argv-numatune-memory.args              |  2 +-
 .../qemuxml2argv-panic-double.args                 |  2 +-
 .../qemuxml2argv-panic-no-address.args             |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-panic.args     |  2 +-
 .../qemuxml2argv-parallel-parport-chardev.args     |  2 +-
 .../qemuxml2argv-parallel-tcp-chardev.args         |  2 +-
 .../qemuxml2argv-parallel-tcp.args                 |  2 +-
 .../qemuxml2argv-pci-autoadd-addr.args             |  2 +-
 .../qemuxml2argv-pci-autoadd-idx.args              |  2 +-
 .../qemuxml2argv-pci-autofill-addr.args            |  2 +-
 .../qemuxml2argv-pci-bridge-many-disks.args        |  2 +-
 .../qemuxml2argv-pci-expander-bus.args             |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-pci-many.args  |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-pci-rom.args   |  2 +-
 .../qemuxml2argv-pci-serial-dev-chardev.args       |  2 +-
 .../qemuxml2argv-pcie-expander-bus.args            |  2 +-
 .../qemuxml2argv-pcie-root-port.args               |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-pcie-root.args |  2 +-
 .../qemuxml2argv-pcie-switch-downstream-port.args  |  2 +-
 .../qemuxml2argv-pcie-switch-upstream-port.args    |  2 +-
 .../qemuxml2argv-pcihole64-q35.args                |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-pcihole64.args |  2 +-
 .../qemuxml2argv-pmu-feature-off.args              |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-pmu-feature.args |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-ppc-dtb.args   |  2 +-
 .../qemuxml2argv-ppc64-usb-controller-legacy.args  |  2 +-
 .../qemuxml2argv-ppc64-usb-controller.args         |  2 +-
 .../qemuxml2argv-ppce500-serial.args               |  2 +-
 .../qemuxml2argv-pseries-basic.args                |  2 +-
 .../qemuxml2argv-pseries-cpu-compat.args           |  2 +-
 .../qemuxml2argv-pseries-cpu-exact.args            |  2 +-
 .../qemuxml2argv-pseries-cpu-le.args               |  2 +-
 .../qemuxml2argv-pseries-nvram.args                |  2 +-
 .../qemuxml2argv-pseries-panic-missing.args        |  2 +-
 .../qemuxml2argv-pseries-panic-no-address.args     |  2 +-
 .../qemuxml2argv-pseries-usb-default.args          |  2 +-
 .../qemuxml2argv-pseries-usb-kbd.args              |  2 +-
 .../qemuxml2argv-pseries-usb-multi.args            |  2 +-
 .../qemuxml2argv-pseries-vio-user-assigned.args    |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-pseries-vio.args |  2 +-
 .../qemuxml2argv-pv-spinlock-disabled.args         |  2 +-
 .../qemuxml2argv-pv-spinlock-enabled.args          |  2 +-
 .../qemuxml2argv-q35-pm-disable-fallback.args      |  2 +-
 .../qemuxml2argv-q35-pm-disable.args               |  2 +-
 .../qemuxml2argv-q35-usb2-multi.args               |  2 +-
 .../qemuxml2argv-q35-usb2-reorder.args             |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-q35-usb2.args  |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-q35.args       |  2 +-
 .../qemuxml2argv-qemu-ns-commandline-ns0.args      |  2 +-
 .../qemuxml2argv-qemu-ns-commandline-ns1.args      |  2 +-
 .../qemuxml2argv-qemu-ns-commandline.args          |  2 +-
 ...emuxml2argv-qemu-ns-domain-commandline-ns0.args |  2 +-
 .../qemuxml2argv-qemu-ns-domain-commandline.args   |  2 +-
 .../qemuxml2argv-qemu-ns-domain-ns0.args           |  2 +-
 .../qemuxml2argv-qemu-ns-no-env.args               |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-qemu-ns.args   |  2 +-
 .../qemuxml2argv-reboot-timeout-disabled.args      |  2 +-
 .../qemuxml2argv-reboot-timeout-enabled.args       |  2 +-
 .../qemuxml2argv-restore-v2-fd.args                |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-restore-v2.args  |  2 +-
 ...muxml2argv-s390-allow-bogus-usb-controller.args |  2 +-
 .../qemuxml2argv-s390-allow-bogus-usb-none.args    |  2 +-
 .../qemuxml2argv-s390-panic-missing.args           |  2 +-
 .../qemuxml2argv-s390-panic-no-address.args        |  2 +-
 .../qemuxml2argv-seclabel-dac-none.args            |  2 +-
 .../qemuxml2argv-seclabel-dynamic-baselabel.args   |  2 +-
 .../qemuxml2argv-seclabel-dynamic-labelskip.args   |  2 +-
 .../qemuxml2argv-seclabel-dynamic-override.args    |  2 +-
 .../qemuxml2argv-seclabel-dynamic-relabel.args     |  2 +-
 .../qemuxml2argv-seclabel-dynamic.args             |  2 +-
 .../qemuxml2argv-seclabel-none.args                |  2 +-
 .../qemuxml2argv-seclabel-static-labelskip.args    |  2 +-
 .../qemuxml2argv-seclabel-static-relabel.args      |  2 +-
 .../qemuxml2argv-seclabel-static.args              |  2 +-
 .../qemuxml2argv-serial-dev-chardev-iobase.args    |  2 +-
 .../qemuxml2argv-serial-dev-chardev.args           |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-serial-dev.args  |  2 +-
 .../qemuxml2argv-serial-file-chardev.args          |  2 +-
 .../qemuxml2argv-serial-file-log.args              |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-serial-file.args |  2 +-
 .../qemuxml2argv-serial-many-chardev.args          |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-serial-many.args |  2 +-
 .../qemuxml2argv-serial-pty-chardev.args           |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-serial-pty.args  |  2 +-
 .../qemuxml2argv-serial-spiceport-nospice.args     |  2 +-
 .../qemuxml2argv-serial-spiceport.args             |  2 +-
 .../qemuxml2argv-serial-tcp-chardev.args           |  2 +-
 .../qemuxml2argv-serial-tcp-telnet-chardev.args    |  2 +-
 .../qemuxml2argv-serial-tcp-telnet.args            |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-serial-tcp.args  |  2 +-
 .../qemuxml2argv-serial-udp-chardev.args           |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-serial-udp.args  |  2 +-
 .../qemuxml2argv-serial-unix-chardev.args          |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-serial-unix.args |  2 +-
 .../qemuxml2argv-serial-vc-chardev.args            |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-serial-vc.args |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-shmem.args     |  2 +-
 .../qemuxml2argv-smartcard-controller.args         |  2 +-
 .../qemuxml2argv-smartcard-host-certificates.args  |  2 +-
 .../qemuxml2argv-smartcard-host.args               |  2 +-
 ...emuxml2argv-smartcard-passthrough-spicevmc.args |  2 +-
 .../qemuxml2argv-smartcard-passthrough-tcp.args    |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-smbios.args    |  2 +-
 .../qemuxml2argv-sound-device.args                 |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-sound.args     |  2 +-
 .../qemuxml2argv-tpm-passthrough.args              |  2 +-
 .../qemuxml2argv-usb-controller-default-q35.args   |  2 +-
 .../qemuxml2argv-usb-controller-explicit-q35.args  |  2 +-
 .../qemuxml2argv-usb-controller-xhci.args          |  2 +-
 .../qemuxml2argv-usb-controller.args               |  2 +-
 .../qemuxml2argv-usb-hub-autoadd.args              |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-usb-hub.args   |  2 +-
 .../qemuxml2argv-usb-ich9-autoassign.args          |  2 +-
 .../qemuxml2argv-usb-ich9-companion.args           |  2 +-
 .../qemuxml2argv-usb-ich9-ehci-addr.args           |  2 +-
 .../qemuxml2argv-usb-long-port-path.args           |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-usb-none.args  |  2 +-
 .../qemuxml2argv-usb-piix3-controller.args         |  2 +-
 .../qemuxml2argv-usb-port-autoassign.args          |  2 +-
 .../qemuxml2argv-usb-port-missing.args             |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-usb-ports.args |  2 +-
 .../qemuxml2argv-usb-redir-boot.args               |  2 +-
 .../qemuxml2argv-usb-redir-filter-version.args     |  2 +-
 .../qemuxml2argv-usb-redir-filter.args             |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-usb-redir.args |  2 +-
 .../qemuxml2argv-usb-xhci-autoassign.args          |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-usb1-usb2.args |  2 +-
 .../qemuxml2argv-video-device-pciaddr-default.args |  2 +-
 .../qemuxml2argv-video-qxl-device-vgamem.args      |  2 +-
 .../qemuxml2argv-video-qxl-device.args             |  2 +-
 .../qemuxml2argv-video-qxl-heads.args              |  2 +-
 .../qemuxml2argv-video-qxl-nodevice.args           |  2 +-
 .../qemuxml2argv-video-qxl-noheads.args            |  2 +-
 .../qemuxml2argv-video-qxl-sec-device-vgamem.args  |  2 +-
 .../qemuxml2argv-video-qxl-sec-device.args         |  2 +-
 .../qemuxml2argv-video-vga-device-vgamem.args      |  2 +-
 .../qemuxml2argv-video-vga-device.args             |  2 +-
 .../qemuxml2argv-video-vga-nodevice.args           |  2 +-
 .../qemuxml2argv-video-virtio-gpu-device.args      |  2 +-
 .../qemuxml2argv-video-virtio-gpu-spice-gl.args    |  2 +-
 .../qemuxml2argv-video-virtio-gpu-virgl.args       |  2 +-
 .../qemuxml2argv-virtio-input-passthrough.args     |  2 +-
 .../qemuxml2argv-virtio-input.args                 |  2 +-
 .../qemuxml2argvdata/qemuxml2argv-virtio-lun.args  |  2 +-
 .../qemuxml2argv-virtio-rng-ccw.args               |  2 +-
 .../qemuxml2argv-virtio-rng-default.args           |  2 +-
 .../qemuxml2argv-virtio-rng-egd.args               |  2 +-
 .../qemuxml2argv-virtio-rng-multiple.args          |  2 +-
 .../qemuxml2argv-virtio-rng-random.args            |  2 +-
 .../qemuxml2argv-watchdog-device.args              |  2 +-
 .../qemuxml2argv-watchdog-diag288.args             |  2 +-
 .../qemuxml2argv-watchdog-dump.args                |  2 +-
 .../qemuxml2argv-watchdog-injectnmi.args           |  2 +-
 tests/qemuxml2argvdata/qemuxml2argv-watchdog.args  |  2 +-
 tests/qemuxml2argvtest.c                           | 19 +++++-----
 505 files changed, 510 insertions(+), 551 deletions(-)

diff --git a/src/qemu/qemu_capabilities.c b/src/qemu/qemu_capabilities.c
index d3964bd..f41c8c4 100644
--- a/src/qemu/qemu_capabilities.c
+++ b/src/qemu/qemu_capabilities.c
@@ -1231,10 +1231,6 @@ virQEMUCapsComputeCmdFlags(const char *help,
 
     if (strstr(help, "-sdl"))
         virQEMUCapsSet(qemuCaps, QEMU_CAPS_SDL);
-    if (strstr(help, "cores=") &&
-        strstr(help, "threads=") &&
-        strstr(help, "sockets="))
-        virQEMUCapsSet(qemuCaps, QEMU_CAPS_SMP_TOPOLOGY);
 
     if (strstr(help, ",vhost="))
         virQEMUCapsSet(qemuCaps, QEMU_CAPS_VHOST_NET);
@@ -3385,7 +3381,6 @@ virQEMUCapsInitQMPBasic(virQEMUCapsPtr qemuCaps)
     virQEMUCapsSet(qemuCaps, QEMU_CAPS_CHARDEV);
     virQEMUCapsSet(qemuCaps, QEMU_CAPS_MONITOR_JSON);
     virQEMUCapsSet(qemuCaps, QEMU_CAPS_SDL);
-    virQEMUCapsSet(qemuCaps, QEMU_CAPS_SMP_TOPOLOGY);
     virQEMUCapsSet(qemuCaps, QEMU_CAPS_NETDEV);
     virQEMUCapsSet(qemuCaps, QEMU_CAPS_RTC);
     virQEMUCapsSet(qemuCaps, QEMU_CAPS_VHOST_NET);
diff --git a/src/qemu/qemu_capabilities.h b/src/qemu/qemu_capabilities.h
index 150d619..ba9556d 100644
--- a/src/qemu/qemu_capabilities.h
+++ b/src/qemu/qemu_capabilities.h
@@ -85,7 +85,7 @@ typedef enum {
     X_QEMU_CAPS_BALLOON, /* -balloon available */
     X_QEMU_CAPS_DEVICE, /* Is the -device arg available */
     QEMU_CAPS_SDL, /* Is the new -sdl arg available */
-    QEMU_CAPS_SMP_TOPOLOGY, /* -smp has sockets/cores/threads */
+    X_QEMU_CAPS_SMP_TOPOLOGY, /* -smp has sockets/cores/threads */
     QEMU_CAPS_NETDEV, /* -netdev flag & netdev_add/remove */
 
     /* 30 */
diff --git a/src/qemu/qemu_command.c b/src/qemu/qemu_command.c
index a001d2c..9832a6a 100644
--- a/src/qemu/qemu_command.c
+++ b/src/qemu/qemu_command.c
@@ -7108,8 +7108,7 @@ qemuBuildMachineCommandLine(virCommandPtr cmd,
 
 static int
 qemuBuildSmpCommandLine(virCommandPtr cmd,
-                        const virDomainDef *def,
-                        virQEMUCapsPtr qemuCaps)
+                        const virDomainDef *def)
 {
     char *smp;
     virBuffer buf = VIR_BUFFER_INITIALIZER;
@@ -7118,29 +7117,18 @@ qemuBuildSmpCommandLine(virCommandPtr cmd,
 
     virBufferAsprintf(&buf, "%u", virDomainDefGetVcpus(def));
 
-    if (virQEMUCapsGet(qemuCaps, QEMU_CAPS_SMP_TOPOLOGY)) {
-        if (virDomainDefHasVcpusOffline(def))
-            virBufferAsprintf(&buf, ",maxcpus=%u",
-                              virDomainDefGetVcpusMax(def));
-        /* sockets, cores, and threads are either all zero
-         * or all non-zero, thus checking one of them is enough */
-        if (def->cpu && def->cpu->sockets) {
-            virBufferAsprintf(&buf, ",sockets=%u", def->cpu->sockets);
-            virBufferAsprintf(&buf, ",cores=%u", def->cpu->cores);
-            virBufferAsprintf(&buf, ",threads=%u", def->cpu->threads);
-        } else {
-            virBufferAsprintf(&buf, ",sockets=%u",
-                              virDomainDefGetVcpusMax(def));
-            virBufferAsprintf(&buf, ",cores=%u", 1);
-            virBufferAsprintf(&buf, ",threads=%u", 1);
-        }
-    } else if (virDomainDefHasVcpusOffline(def)) {
-        virBufferFreeAndReset(&buf);
-        /* FIXME - consider hot-unplugging cpus after boot for older qemu */
-        virReportError(VIR_ERR_CONFIG_UNSUPPORTED, "%s",
-                       _("setting current vcpu count less than maximum is "
-                         "not supported with this QEMU binary"));
-        return -1;
+    if (virDomainDefHasVcpusOffline(def))
+        virBufferAsprintf(&buf, ",maxcpus=%u", virDomainDefGetVcpusMax(def));
+    /* sockets, cores, and threads are either all zero
+     * or all non-zero, thus checking one of them is enough */
+    if (def->cpu && def->cpu->sockets) {
+        virBufferAsprintf(&buf, ",sockets=%u", def->cpu->sockets);
+        virBufferAsprintf(&buf, ",cores=%u", def->cpu->cores);
+        virBufferAsprintf(&buf, ",threads=%u", def->cpu->threads);
+    } else {
+        virBufferAsprintf(&buf, ",sockets=%u", virDomainDefGetVcpusMax(def));
+        virBufferAsprintf(&buf, ",cores=%u", 1);
+        virBufferAsprintf(&buf, ",threads=%u", 1);
     }
 
     if (virBufferCheckError(&buf) < 0)
@@ -9438,7 +9426,7 @@ qemuBuildCommandLine(virQEMUDriverPtr driver,
     if (qemuBuildMemCommandLine(cmd, cfg, def, qemuCaps) < 0)
         goto error;
 
-    if (qemuBuildSmpCommandLine(cmd, def, qemuCaps) < 0)
+    if (qemuBuildSmpCommandLine(cmd, def) < 0)
         goto error;
 
     if (qemuBuildIOThreadCommandLine(cmd, def, qemuCaps) < 0)
diff --git a/tests/qemucapabilitiesdata/caps_1.2.2.x86_64.xml b/tests/qemucapabilitiesdata/caps_1.2.2.x86_64.xml
index c1d5212..c84f3de 100644
--- a/tests/qemucapabilitiesdata/caps_1.2.2.x86_64.xml
+++ b/tests/qemucapabilitiesdata/caps_1.2.2.x86_64.xml
@@ -9,7 +9,6 @@
   <flag name='enable-kvm'/>
   <flag name='monitor-json'/>
   <flag name='sdl'/>
-  <flag name='smp-topology'/>
   <flag name='netdev'/>
   <flag name='rtc'/>
   <flag name='vhost-net'/>
diff --git a/tests/qemucapabilitiesdata/caps_1.3.1.x86_64.xml b/tests/qemucapabilitiesdata/caps_1.3.1.x86_64.xml
index 3ac7bdd..c21fdd0 100644
--- a/tests/qemucapabilitiesdata/caps_1.3.1.x86_64.xml
+++ b/tests/qemucapabilitiesdata/caps_1.3.1.x86_64.xml
@@ -9,7 +9,6 @@
   <flag name='enable-kvm'/>
   <flag name='monitor-json'/>
   <flag name='sdl'/>
-  <flag name='smp-topology'/>
   <flag name='netdev'/>
   <flag name='rtc'/>
   <flag name='vhost-net'/>
diff --git a/tests/qemucapabilitiesdata/caps_1.4.2.x86_64.xml b/tests/qemucapabilitiesdata/caps_1.4.2.x86_64.xml
index 78628ee..6dc74ce 100644
--- a/tests/qemucapabilitiesdata/caps_1.4.2.x86_64.xml
+++ b/tests/qemucapabilitiesdata/caps_1.4.2.x86_64.xml
@@ -9,7 +9,6 @@
   <flag name='enable-kvm'/>
   <flag name='monitor-json'/>
   <flag name='sdl'/>
-  <flag name='smp-topology'/>
   <flag name='netdev'/>
   <flag name='rtc'/>
   <flag name='vhost-net'/>
diff --git a/tests/qemucapabilitiesdata/caps_1.5.3.x86_64.xml b/tests/qemucapabilitiesdata/caps_1.5.3.x86_64.xml
index ba096b8..358ce3f 100644
--- a/tests/qemucapabilitiesdata/caps_1.5.3.x86_64.xml
+++ b/tests/qemucapabilitiesdata/caps_1.5.3.x86_64.xml
@@ -9,7 +9,6 @@
   <flag name='enable-kvm'/>
   <flag name='monitor-json'/>
   <flag name='sdl'/>
-  <flag name='smp-topology'/>
   <flag name='netdev'/>
   <flag name='rtc'/>
   <flag name='vhost-net'/>
diff --git a/tests/qemucapabilitiesdata/caps_1.6.0.x86_64.xml b/tests/qemucapabilitiesdata/caps_1.6.0.x86_64.xml
index 9b454b0..9e96dc0 100644
--- a/tests/qemucapabilitiesdata/caps_1.6.0.x86_64.xml
+++ b/tests/qemucapabilitiesdata/caps_1.6.0.x86_64.xml
@@ -9,7 +9,6 @@
   <flag name='enable-kvm'/>
   <flag name='monitor-json'/>
   <flag name='sdl'/>
-  <flag name='smp-topology'/>
   <flag name='netdev'/>
   <flag name='rtc'/>
   <flag name='vhost-net'/>
diff --git a/tests/qemucapabilitiesdata/caps_1.7.0.x86_64.xml b/tests/qemucapabilitiesdata/caps_1.7.0.x86_64.xml
index db0d000..3b56444 100644
--- a/tests/qemucapabilitiesdata/caps_1.7.0.x86_64.xml
+++ b/tests/qemucapabilitiesdata/caps_1.7.0.x86_64.xml
@@ -9,7 +9,6 @@
   <flag name='enable-kvm'/>
   <flag name='monitor-json'/>
   <flag name='sdl'/>
-  <flag name='smp-topology'/>
   <flag name='netdev'/>
   <flag name='rtc'/>
   <flag name='vhost-net'/>
diff --git a/tests/qemucapabilitiesdata/caps_2.1.1.x86_64.xml b/tests/qemucapabilitiesdata/caps_2.1.1.x86_64.xml
index 964b6f0..19ac793 100644
--- a/tests/qemucapabilitiesdata/caps_2.1.1.x86_64.xml
+++ b/tests/qemucapabilitiesdata/caps_2.1.1.x86_64.xml
@@ -9,7 +9,6 @@
   <flag name='enable-kvm'/>
   <flag name='monitor-json'/>
   <flag name='sdl'/>
-  <flag name='smp-topology'/>
   <flag name='netdev'/>
   <flag name='rtc'/>
   <flag name='vhost-net'/>
diff --git a/tests/qemucapabilitiesdata/caps_2.4.0.x86_64.xml b/tests/qemucapabilitiesdata/caps_2.4.0.x86_64.xml
index 225019a..7c63682 100644
--- a/tests/qemucapabilitiesdata/caps_2.4.0.x86_64.xml
+++ b/tests/qemucapabilitiesdata/caps_2.4.0.x86_64.xml
@@ -9,7 +9,6 @@
   <flag name='enable-kvm'/>
   <flag name='monitor-json'/>
   <flag name='sdl'/>
-  <flag name='smp-topology'/>
   <flag name='netdev'/>
   <flag name='rtc'/>
   <flag name='vhost-net'/>
diff --git a/tests/qemucapabilitiesdata/caps_2.5.0.x86_64.xml b/tests/qemucapabilitiesdata/caps_2.5.0.x86_64.xml
index f16f057..df25aae 100644
--- a/tests/qemucapabilitiesdata/caps_2.5.0.x86_64.xml
+++ b/tests/qemucapabilitiesdata/caps_2.5.0.x86_64.xml
@@ -9,7 +9,6 @@
   <flag name='enable-kvm'/>
   <flag name='monitor-json'/>
   <flag name='sdl'/>
-  <flag name='smp-topology'/>
   <flag name='netdev'/>
   <flag name='rtc'/>
   <flag name='vhost-net'/>
diff --git a/tests/qemucapabilitiesdata/caps_2.6.0-gicv2.aarch64.xml b/tests/qemucapabilitiesdata/caps_2.6.0-gicv2.aarch64.xml
index c57f11f..7586269 100644
--- a/tests/qemucapabilitiesdata/caps_2.6.0-gicv2.aarch64.xml
+++ b/tests/qemucapabilitiesdata/caps_2.6.0-gicv2.aarch64.xml
@@ -9,7 +9,6 @@
   <flag name='enable-kvm'/>
   <flag name='monitor-json'/>
   <flag name='sdl'/>
-  <flag name='smp-topology'/>
   <flag name='netdev'/>
   <flag name='rtc'/>
   <flag name='vhost-net'/>
diff --git a/tests/qemucapabilitiesdata/caps_2.6.0-gicv3.aarch64.xml b/tests/qemucapabilitiesdata/caps_2.6.0-gicv3.aarch64.xml
index 9798323..cc146f6 100644
--- a/tests/qemucapabilitiesdata/caps_2.6.0-gicv3.aarch64.xml
+++ b/tests/qemucapabilitiesdata/caps_2.6.0-gicv3.aarch64.xml
@@ -9,7 +9,6 @@
   <flag name='enable-kvm'/>
   <flag name='monitor-json'/>
   <flag name='sdl'/>
-  <flag name='smp-topology'/>
   <flag name='netdev'/>
   <flag name='rtc'/>
   <flag name='vhost-net'/>
diff --git a/tests/qemucapabilitiesdata/caps_2.6.0.ppc64le.xml b/tests/qemucapabilitiesdata/caps_2.6.0.ppc64le.xml
index 7392551..cf77e92 100644
--- a/tests/qemucapabilitiesdata/caps_2.6.0.ppc64le.xml
+++ b/tests/qemucapabilitiesdata/caps_2.6.0.ppc64le.xml
@@ -9,7 +9,6 @@
   <flag name='enable-kvm'/>
   <flag name='monitor-json'/>
   <flag name='sdl'/>
-  <flag name='smp-topology'/>
   <flag name='netdev'/>
   <flag name='rtc'/>
   <flag name='vhost-net'/>
diff --git a/tests/qemucapabilitiesdata/caps_2.6.0.x86_64.xml b/tests/qemucapabilitiesdata/caps_2.6.0.x86_64.xml
index 766c514..5a2512e 100644
--- a/tests/qemucapabilitiesdata/caps_2.6.0.x86_64.xml
+++ b/tests/qemucapabilitiesdata/caps_2.6.0.x86_64.xml
@@ -9,7 +9,6 @@
   <flag name='enable-kvm'/>
   <flag name='monitor-json'/>
   <flag name='sdl'/>
-  <flag name='smp-topology'/>
   <flag name='netdev'/>
   <flag name='rtc'/>
   <flag name='vhost-net'/>
diff --git a/tests/qemuhelptest.c b/tests/qemuhelptest.c
index d32a731..77ba06b 100644
--- a/tests/qemuhelptest.c
+++ b/tests/qemuhelptest.c
@@ -154,7 +154,6 @@ mymain(void)
             QEMU_CAPS_ENABLE_KVM,
             QEMU_CAPS_SDL,
             QEMU_CAPS_CHARDEV,
-            QEMU_CAPS_SMP_TOPOLOGY,
             QEMU_CAPS_RTC,
             QEMU_CAPS_NO_HPET,
             QEMU_CAPS_BOOT_MENU,
@@ -173,7 +172,6 @@ mymain(void)
             QEMU_CAPS_CHARDEV,
             QEMU_CAPS_ENABLE_KVM,
             QEMU_CAPS_MONITOR_JSON,
-            QEMU_CAPS_SMP_TOPOLOGY,
             QEMU_CAPS_NETDEV,
             QEMU_CAPS_RTC,
             QEMU_CAPS_VHOST_NET,
@@ -214,7 +212,6 @@ mymain(void)
             QEMU_CAPS_MEM_PATH,
             QEMU_CAPS_SDL,
             QEMU_CAPS_CHARDEV,
-            QEMU_CAPS_SMP_TOPOLOGY,
             QEMU_CAPS_RTC,
             QEMU_CAPS_VHOST_NET,
             QEMU_CAPS_NO_HPET,
@@ -239,7 +236,6 @@ mymain(void)
             QEMU_CAPS_CHARDEV,
             QEMU_CAPS_ENABLE_KVM,
             QEMU_CAPS_MONITOR_JSON,
-            QEMU_CAPS_SMP_TOPOLOGY,
             QEMU_CAPS_NETDEV,
             QEMU_CAPS_RTC,
             QEMU_CAPS_VHOST_NET,
@@ -290,7 +286,6 @@ mymain(void)
             QEMU_CAPS_CHARDEV,
             QEMU_CAPS_ENABLE_KVM,
             QEMU_CAPS_MONITOR_JSON,
-            QEMU_CAPS_SMP_TOPOLOGY,
             QEMU_CAPS_NETDEV,
             QEMU_CAPS_RTC,
             QEMU_CAPS_VHOST_NET,
@@ -339,7 +334,6 @@ mymain(void)
             QEMU_CAPS_CHARDEV,
             QEMU_CAPS_ENABLE_KVM,
             QEMU_CAPS_MONITOR_JSON,
-            QEMU_CAPS_SMP_TOPOLOGY,
             QEMU_CAPS_NETDEV,
             QEMU_CAPS_RTC,
             QEMU_CAPS_VHOST_NET,
@@ -396,7 +390,6 @@ mymain(void)
             QEMU_CAPS_CHARDEV,
             QEMU_CAPS_ENABLE_KVM,
             QEMU_CAPS_MONITOR_JSON,
-            QEMU_CAPS_SMP_TOPOLOGY,
             QEMU_CAPS_NETDEV,
             QEMU_CAPS_RTC,
             QEMU_CAPS_VHOST_NET,
@@ -469,7 +462,6 @@ mymain(void)
             QEMU_CAPS_CHARDEV,
             QEMU_CAPS_ENABLE_KVM,
             QEMU_CAPS_MONITOR_JSON,
-            QEMU_CAPS_SMP_TOPOLOGY,
             QEMU_CAPS_NETDEV,
             QEMU_CAPS_RTC,
             QEMU_CAPS_VHOST_NET,
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-aavmf-virtio-mmio.args b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-aavmf-virtio-mmio.args
index 1de2ecf..bf4b2f7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-aavmf-virtio-mmio.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-aavmf-virtio-mmio.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M virt \
 -cpu cortex-a53 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496d7ea8-9739-544b-4ebd-ef08be936e8b \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-cpu-passthrough.args b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-cpu-passthrough.args
index b394066..52d2112 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-cpu-passthrough.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-cpu-passthrough.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M virt \
 -cpu host \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496d7ea8-9739-544b-4ebd-ef08be936e8b \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-gic-host.args b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-gic-host.args
index a16b8b6..23276ad 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-gic-host.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-gic-host.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -machine virt,accel=kvm,gic-version=host \
 -cpu host \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 6ba410c5-1e5c-4d57-bee7-2228e7ffa32f \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-gic-v2.args b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-gic-v2.args
index 031a31e..f79c1c6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-gic-v2.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-gic-v2.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -machine virt,accel=kvm \
 -cpu host \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 6ba410c5-1e5c-4d57-bee7-2228e7ffa32f \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-gic-v3.args b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-gic-v3.args
index f078fd8..fce9308 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-gic-v3.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-gic-v3.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -machine virt,accel=kvm,gic-version=3 \
 -cpu host \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 6ba410c5-1e5c-4d57-bee7-2228e7ffa32f \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-kvm-32-on-64.args b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-kvm-32-on-64.args
index 284aacf..c9eb68a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-kvm-32-on-64.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-kvm-32-on-64.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M virt \
 -cpu host,aarch64=off \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496d7ea8-9739-544b-4ebd-ef08be936e6a \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virt-2.6-virtio-pci-default.args b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virt-2.6-virtio-pci-default.args
index 6c2a908..75db1a4 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virt-2.6-virtio-pci-default.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virt-2.6-virtio-pci-default.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M virt-2.6 \
 -cpu cortex-a53 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496d7ea8-9739-544b-4ebd-ef08be936e8b \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virt-default-nic.args b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virt-default-nic.args
index ab45209..e7131d3 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virt-default-nic.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virt-default-nic.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M virt \
 -cpu cortex-a53 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 6ba410c5-1e5c-4d57-bee7-2228e7ffa32f \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virt-virtio.args b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virt-virtio.args
index 1ed5462..b5b010c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virt-virtio.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virt-virtio.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M virt \
 -cpu cortex-a53 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496d7ea8-9739-544b-4ebd-ef08be936e8b \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virtio-pci-default.args b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virtio-pci-default.args
index 1ed5462..b5b010c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virtio-pci-default.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virtio-pci-default.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M virt \
 -cpu cortex-a53 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496d7ea8-9739-544b-4ebd-ef08be936e8b \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virtio-pci-manual-addresses.args b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virtio-pci-manual-addresses.args
index 8245854..23f94ce 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virtio-pci-manual-addresses.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-aarch64-virtio-pci-manual-addresses.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M virt \
 -cpu cortex-a53 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496d7ea8-9739-544b-4ebd-ef08be936e8b \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-acpi-table.args b/tests/qemuxml2argvdata/qemuxml2argv-acpi-table.args
index 31902ba..e7f62d3 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-acpi-table.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-acpi-table.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-arm-vexpressa9-basic.args b/tests/qemuxml2argvdata/qemuxml2argv-arm-vexpressa9-basic.args
index 37884a7..e91c628 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-arm-vexpressa9-basic.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-arm-vexpressa9-basic.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M vexpress-a9 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496d7ea8-9739-544b-4ebd-ef08be936e6a \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-arm-vexpressa9-nodevs.args b/tests/qemuxml2argvdata/qemuxml2argv-arm-vexpressa9-nodevs.args
index c7c7487..49fccd8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-arm-vexpressa9-nodevs.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-arm-vexpressa9-nodevs.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M vexpress-a9 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496d7ea8-9739-544b-4ebd-ef08be936e6a \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-arm-vexpressa9-virtio.args b/tests/qemuxml2argvdata/qemuxml2argv-arm-vexpressa9-virtio.args
index e6dc00a..e86c555 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-arm-vexpressa9-virtio.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-arm-vexpressa9-virtio.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M vexpress-a9 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496d7ea8-9739-544b-4ebd-ef08be936e6a \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-arm-virt-virtio.args b/tests/qemuxml2argvdata/qemuxml2argv-arm-virt-virtio.args
index d3e8efc..800c5f5 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-arm-virt-virtio.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-arm-virt-virtio.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M virt \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496d7ea8-9739-544b-4ebd-ef08be936e6a \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-autoindex.args b/tests/qemuxml2argvdata/qemuxml2argv-autoindex.args
index bbf8f47..d7a8e4b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-autoindex.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-autoindex.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 11dbdcdd-4c3b-482b-8903-9bdb8c0a2774 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-balloon-ccw-deflate.args b/tests/qemuxml2argvdata/qemuxml2argv-balloon-ccw-deflate.args
index a666876..8565071 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-balloon-ccw-deflate.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-balloon-ccw-deflate.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-ccw \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-auto.args b/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-auto.args
index 390cc9d..7875e14 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-auto.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-auto.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-deflate-off.args b/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-deflate-off.args
index 203fc85..2060ad2 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-deflate-off.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-deflate-off.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-deflate.args b/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-deflate.args
index a112579..57ac600 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-deflate.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-deflate.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-period.args b/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-period.args
index 1289d44..9b63b68 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-period.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-balloon-device-period.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-balloon-device.args b/tests/qemuxml2argvdata/qemuxml2argv-balloon-device.args
index 1289d44..9b63b68 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-balloon-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-balloon-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-balloon-mmio-deflate.args b/tests/qemuxml2argvdata/qemuxml2argv-balloon-mmio-deflate.args
index 42709c5..10d1362 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-balloon-mmio-deflate.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-balloon-mmio-deflate.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M virt \
 -cpu cortex-a53 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496d7ea8-9739-544b-4ebd-ef08be936e8b \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-bios-nvram.args b/tests/qemuxml2argvdata/qemuxml2argv-bios-nvram.args
index 848a029..c482068 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-bios-nvram.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-bios-nvram.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 -drive file=/usr/share/OVMF/OVMF_CODE.fd,if=pflash,format=raw,unit=0,readonly=on \
 -drive file=/usr/share/OVMF/OVMF_VARS.fd,if=pflash,format=raw,unit=1 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 362d1fc1-df7d-193e-5c18-49a71bd1da66 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-bios.args b/tests/qemuxml2argvdata/qemuxml2argv-bios.args
index 604b871..fdd9a4e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-bios.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-bios.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -bios /usr/share/seabios/bios.bin \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 362d1fc1-df7d-193e-5c18-49a71bd1da66 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-blkdeviotune-max.args b/tests/qemuxml2argvdata/qemuxml2argv-blkdeviotune-max.args
index 3efa2ac..66e1c10 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-blkdeviotune-max.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-blkdeviotune-max.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-blkdeviotune.args b/tests/qemuxml2argvdata/qemuxml2argv-blkdeviotune.args
index f69f916..1f9983f 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-blkdeviotune.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-blkdeviotune.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-blkiotune-device.args b/tests/qemuxml2argvdata/qemuxml2argv-blkiotune-device.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-blkiotune-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-blkiotune-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-blkiotune.args b/tests/qemuxml2argvdata/qemuxml2argv-blkiotune.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-blkiotune.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-blkiotune.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-cdrom.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-cdrom.args
index 0296242..32de47b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-cdrom.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-cdrom.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-complex-bootindex.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-complex-bootindex.args
index 051c139..a443511 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-complex-bootindex.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-complex-bootindex.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-complex.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-complex.args
index fe7e225..45da387 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-complex.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-complex.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-floppy-q35.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-floppy-q35.args
index 4915ae5..b9c6126 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-floppy-q35.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-floppy-q35.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-q35-2.4 \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-floppy.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-floppy.args
index 6666e3b..2c53870 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-floppy.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-floppy.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-disable-drive-bootindex.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-disable-drive-bootindex.args
index c2d4a7d..099fc16 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-disable-drive-bootindex.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-disable-drive-bootindex.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-disable-drive.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-disable-drive.args
index 3759677..ef59ff7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-disable-drive.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-disable-drive.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-disable.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-disable.args
index 3759677..ef59ff7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-disable.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-disable.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-enable-bootindex.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-enable-bootindex.args
index 6580b82..809393d 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-enable-bootindex.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-enable-bootindex.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-enable-with-timeout.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-enable-with-timeout.args
index 74252f2..a16bc29 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-enable-with-timeout.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-enable-with-timeout.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-enable.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-enable.args
index 6c9eda0..f56a9d5 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-enable.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-menu-enable.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-multi.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-multi.args
index 4050176..a258c8a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-multi.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-multi.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-network.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-network.args
index 8e8c4da..bf57a6e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-network.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-network.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-order.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-order.args
index 6d2d030..daf889d 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-order.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-order.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-boot-strict.args b/tests/qemuxml2argvdata/qemuxml2argv-boot-strict.args
index 7de2ace..af4b970 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-boot-strict.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-boot-strict.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-bootindex-floppy-q35.args b/tests/qemuxml2argvdata/qemuxml2argv-bootindex-floppy-q35.args
index 26ae886..8bcdc1f 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-bootindex-floppy-q35.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-bootindex-floppy-q35.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-q35-2.4 \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-channel-guestfwd.args b/tests/qemuxml2argvdata/qemuxml2argv-channel-guestfwd.args
index ee213ab..f70b953 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-channel-guestfwd.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-channel-guestfwd.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-channel-spicevmc-old.args b/tests/qemuxml2argvdata/qemuxml2argv-channel-spicevmc-old.args
index 23c5df5..81d4c7e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-channel-spicevmc-old.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-channel-spicevmc-old.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefconfig \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-channel-spicevmc.args b/tests/qemuxml2argvdata/qemuxml2argv-channel-spicevmc.args
index b633e65..1dc068e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-channel-spicevmc.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-channel-spicevmc.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefconfig \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-auto.args b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-auto.args
index c01dfad..1a00535 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-auto.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-auto.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-autoadd.args b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-autoadd.args
index f087d18..5d75d3d 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-autoadd.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-autoadd.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-autoassign.args b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-autoassign.args
index b5e1e77..229e31e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-autoassign.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-autoassign.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-default.args b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-default.args
index ad2981b..fe7d542 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-default.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-default.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-state.args b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-state.args
index 2e4f960..7a0cf87 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-state.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-state.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-unix.args b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-unix.args
index b56ced5..3e7fd52 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-unix.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio-unix.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio.args b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio.args
index b21bf67..3f0d4e2 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-channel-virtio.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-clock-catchup.args b/tests/qemuxml2argvdata/qemuxml2argv-clock-catchup.args
index f08a28c..c47e2db 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-clock-catchup.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-clock-catchup.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-clock-france.args b/tests/qemuxml2argvdata/qemuxml2argv-clock-france.args
index 6992559..8535d12 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-clock-france.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-clock-france.args
@@ -10,7 +10,7 @@ TZ=Europe/Paris \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-clock-hpet-off.args b/tests/qemuxml2argvdata/qemuxml2argv-clock-hpet-off.args
index a0c6145..e978689 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-clock-hpet-off.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-clock-hpet-off.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-clock-localtime-basis-localtime.args b/tests/qemuxml2argvdata/qemuxml2argv-clock-localtime-basis-localtime.args
index 080c29c..82482a9 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-clock-localtime-basis-localtime.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-clock-localtime-basis-localtime.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 1c15a1f6-f4f0-4d3c-9002-667ddb458736 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-clock-localtime.args b/tests/qemuxml2argvdata/qemuxml2argv-clock-localtime.args
index e5a746e..5a015a8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-clock-localtime.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-clock-localtime.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-clock-timer-hyperv-rtc.args b/tests/qemuxml2argvdata/qemuxml2argv-clock-timer-hyperv-rtc.args
index 4fa1163..cd38855 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-clock-timer-hyperv-rtc.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-clock-timer-hyperv-rtc.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,hv_time \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-clock-utc.args b/tests/qemuxml2argvdata/qemuxml2argv-clock-utc.args
index ee120fa..3c21045 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-clock-utc.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-clock-utc.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-clock-variable.args b/tests/qemuxml2argvdata/qemuxml2argv-clock-variable.args
index 4f02c40..a8716a2 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-clock-variable.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-clock-variable.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-console-compat-auto.args b/tests/qemuxml2argvdata/qemuxml2argv-console-compat-auto.args
index a192a0a..bb7dbff 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-console-compat-auto.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-console-compat-auto.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-console-compat-chardev.args b/tests/qemuxml2argvdata/qemuxml2argv-console-compat-chardev.args
index e071b3f..0e7f26a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-console-compat-chardev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-console-compat-chardev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-console-compat.args b/tests/qemuxml2argvdata/qemuxml2argv-console-compat.args
index 9fea57f..1a63b9a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-console-compat.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-console-compat.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-console-sclp.args b/tests/qemuxml2argvdata/qemuxml2argv-console-sclp.args
index 73b6b08..dc9f7af 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-console-sclp.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-console-sclp.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-virtio \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-console-virtio-ccw.args b/tests/qemuxml2argvdata/qemuxml2argv-console-virtio-ccw.args
index cae909a..160b1f5 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-console-virtio-ccw.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-console-virtio-ccw.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-ccw \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-console-virtio-many.args b/tests/qemuxml2argvdata/qemuxml2argv-console-virtio-many.args
index d765334..abe3e3b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-console-virtio-many.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-console-virtio-many.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-console-virtio-s390.args b/tests/qemuxml2argvdata/qemuxml2argv-console-virtio-s390.args
index 3ec1109..6e0e11e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-console-virtio-s390.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-console-virtio-s390.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-virtio \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-console-virtio.args b/tests/qemuxml2argvdata/qemuxml2argv-console-virtio.args
index 0dd75aa..4cc7023 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-console-virtio.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-console-virtio.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-controller-order.args b/tests/qemuxml2argvdata/qemuxml2argv-controller-order.args
index 7b98beb..3361383 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-controller-order.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-controller-order.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=spice \
 -M rhel6.1.0 \
 -enable-kvm \
 -m 4096 \
--smp 4 \
+-smp 4,sockets=4,cores=1,threads=1 \
 -uuid d091ea82-29e6-2e34-3005-f02617b36e87 \
 -nodefaults \
 -chardev socket,id=charmonitor,path=/tmp/lib/domain--1-fdr/monitor.sock,server,\
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell-noTSX.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell-noTSX.args
index 57e6e07..783a4ab 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell-noTSX.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell-noTSX.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu Haswell-noTSX \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell.args
index 29cf688..2e74a67 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu Haswell,+rtm,+hle \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell2.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell2.args
index 6503a52..e089a74 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell2.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell2.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu Haswell,-hle,-rtm \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell3.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell3.args
index 29cf688..2e74a67 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell3.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-Haswell3.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu Haswell,+rtm,+hle \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-eoi-disabled.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-eoi-disabled.args
index d518c70..db14ac4 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-eoi-disabled.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-eoi-disabled.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,-kvm_pv_eoi \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-eoi-enabled.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-eoi-enabled.args
index b21a13c..ce964a6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-eoi-enabled.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-eoi-enabled.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,+kvm_pv_eoi \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-exact1.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-exact1.args
index 971d522..4a7f174 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-exact1.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-exact1.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu64,-mca,-pse36,-clflush,-syscall,-nx,-lm,-svm \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-exact2-nofallback.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-exact2-nofallback.args
index 404878d..0693e70 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-exact2-nofallback.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-exact2-nofallback.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu core2duo,+ds,+ht,+tm,+ds_cpl,+xtpr,+3dnowext,+lahf_lm,-nx \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-exact2.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-exact2.args
index 404878d..0693e70 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-exact2.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-exact2.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu core2duo,+ds,+ht,+tm,+ds_cpl,+xtpr,+3dnowext,+lahf_lm,-nx \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-fallback.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-fallback.args
index 6b9dc82..0352eb7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-fallback.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-fallback.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu Penryn,-sse4.1 \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-kvmclock.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-kvmclock.args
index a7fea66..6eead4b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-kvmclock.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-kvmclock.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 -enable-kvm \
 -cpu host,-kvmclock \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model-cmt.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model-cmt.args
index b7fdf4b..2d7e5bf 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model-cmt.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model-cmt.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 -cpu Haswell,+vme,+ds,+acpi,+ss,+ht,+tm,+pbe,+dtes64,+monitor,+ds_cpl,+vmx,\
 +smx,+est,+tm2,+xtpr,+pdcm,+osxsave,+f16c,+rdrand,+pdpe1gb,+abm,+rtm,+hle \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model-fallback.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model-fallback.args
index d96d973..4e53547 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model-fallback.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model-fallback.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 -cpu Penryn,+vme,+ds,+acpi,+ss,+ht,+tm,+pbe,+monitor,+ds_cpl,+vmx,+est,+tm2,\
 +xtpr,-sse4.1 \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model-vendor.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model-vendor.args
index 04abe06..416712f 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model-vendor.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model-vendor.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 -cpu 'core2duo,vendor=Libvirt QEMU,+ds,+acpi,+ss,+ht,+tm,+pbe,+ds_cpl,+vmx,+est,\
 +tm2,+cx16,+xtpr,+lahf_lm' \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model.args
index b6e660c..a57ef9a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-model.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 -cpu core2duo,+ds,+acpi,+ss,+ht,+tm,+pbe,+ds_cpl,+vmx,+est,+tm2,+cx16,+xtpr,\
 +lahf_lm \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-passthrough-features.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-passthrough-features.args
index 5a722a8..fa960c3 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-passthrough-features.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-passthrough-features.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu host,+abm,+ds,-invtsc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-passthrough.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-passthrough.args
index e3d13a2..aa73f89 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-passthrough.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-host-passthrough.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu host \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-kvmclock.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-kvmclock.args
index 23dcc91..6e50dc1 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-kvmclock.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-kvmclock.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 -enable-kvm \
 -cpu core2duo,-kvmclock \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-minimum1.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-minimum1.args
index a7d37fc..decf7fd 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-minimum1.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-minimum1.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 -cpu core2duo,+ds,+acpi,+ss,+ht,+tm,+pbe,+ds_cpl,+vmx,+est,+tm2,+cx16,+xtpr,\
 +lahf_lm \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-minimum2.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-minimum2.args
index ca6592f..e1b902f 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-minimum2.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-minimum2.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 -cpu core2duo,+ds,+acpi,+ss,+ht,+tm,+pbe,+ds_cpl,+vmx,+est,+tm2,+cx16,+xtpr,\
 +lahf_lm,-syscall,-nx,-lm \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-numa-disjoint.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-numa-disjoint.args
index 5b112c6..5ff7a43 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-numa-disjoint.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-numa-disjoint.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 16 \
+-smp 16,sockets=2,cores=4,threads=2 \
 -numa node,nodeid=0,cpus=0-3,cpus=8-11,mem=107 \
 -numa node,nodeid=1,cpus=4-7,cpus=12-15,mem=107 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-numa1.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-numa1.args
index bc8c54c..2613649 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-numa1.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-numa1.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 16 \
+-smp 16,sockets=2,cores=4,threads=2 \
 -numa node,nodeid=0,cpus=0-7,mem=107 \
 -numa node,nodeid=1,cpus=8-15,mem=107 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-strict1.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-strict1.args
index a6b2c1f..ad7b1c5 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-strict1.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-strict1.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu core2duo,+ds,+acpi,+ht,+tm,+ds_cpl,+vmx,+est,+xtpr,+3dnowext,+lahf_lm,-nx \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cpu-topology3.args b/tests/qemuxml2argvdata/qemuxml2argv-cpu-topology3.args
index 3510234..eb001c1 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cpu-topology3.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cpu-topology3.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 6 \
+-smp 6,sockets=3,cores=2,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cputune-zero-shares.args b/tests/qemuxml2argvdata/qemuxml2argv-cputune-zero-shares.args
index 23d4b2a..d732b04 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cputune-zero-shares.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cputune-zero-shares.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-cputune.args b/tests/qemuxml2argvdata/qemuxml2argv-cputune.args
index 23d4b2a..d732b04 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-cputune.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-cputune.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-debug-threads.args b/tests/qemuxml2argvdata/qemuxml2argv-debug-threads.args
index 2ad6fcf..b57f143 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-debug-threads.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-debug-threads.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-default-kvm-host-arch.args b/tests/qemuxml2argvdata/qemuxml2argv-default-kvm-host-arch.args
index 872f782..39195f2 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-default-kvm-host-arch.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-default-kvm-host-arch.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine pc,accel=kvm \
 -m 4096 \
--smp 4 \
+-smp 4,sockets=4,cores=1,threads=1 \
 -uuid d091ea82-29e6-2e34-3005-f02617b36e87 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-default-qemu-host-arch.args b/tests/qemuxml2argvdata/qemuxml2argv-default-qemu-host-arch.args
index 4c2019a..0396810 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-default-qemu-host-arch.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-default-qemu-host-arch.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine pc-0.11,accel=tcg \
 -m 4096 \
--smp 4 \
+-smp 4,sockets=4,cores=1,threads=1 \
 -uuid d091ea82-29e6-2e34-3005-f02617b36e87 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-aio.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-aio.args
index 70670da..b0d1f04 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-aio.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-aio.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-blockio.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-blockio.args
index d220a31..9367a96 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-blockio.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-blockio.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-empty.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-empty.args
index ce5df64..1477bbb 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-empty.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-empty.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-ftp.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-ftp.args
index 253736d..1c306b5 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-ftp.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-ftp.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-1.2 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-ftps.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-ftps.args
index bdedf1a..2c14818 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-ftps.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-ftps.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-1.2 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-http.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-http.args
index fddb339..0bdaaf9 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-http.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-http.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-1.2 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-https.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-https.args
index a83b5a0..3934842 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-https.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-https.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-1.2 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-tftp.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-tftp.args
index 3efc64f..165cd91 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-tftp.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-network-tftp.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-1.2 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-tray-no-device-cap.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-tray-no-device-cap.args
index 020aac9..0231d03 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-tray-no-device-cap.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-tray-no-device-cap.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-tray.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-tray.args
index 3adcb1f..0655ee2 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-tray.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom-tray.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-0.13 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 3fa02811-7832-34bd-004d-1ff56a9286ff \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom.args
index 26b10aa..ad5523b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-cdrom.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-copy_on_read.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-copy_on_read.args
index 37074b8..02a7970 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-copy_on_read.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-copy_on_read.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-0.13 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 468404ad-d49c-40f2-9e14-02294f9c1be3 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-boot-cdrom.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-boot-cdrom.args
index 1a1925c..9c73926 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-boot-cdrom.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-boot-cdrom.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-boot-disk.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-boot-disk.args
index 4bab779..f24c0f0 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-boot-disk.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-boot-disk.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-directsync.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-directsync.args
index 152dbf7..6ef08ae 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-directsync.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-directsync.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-unsafe.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-unsafe.args
index 8a66e06..96f768a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-unsafe.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-unsafe.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-v2-none.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-v2-none.args
index 6118eba..7e555fa 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-v2-none.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-v2-none.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-v2-wb.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-v2-wb.args
index aced6be..8a0362d 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-v2-wb.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-v2-wb.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-v2-wt.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-v2-wt.args
index af697a8..80b34ae 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-v2-wt.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-cache-v2-wt.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-copy-on-read.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-copy-on-read.args
index 377cb70..72f0d93 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-copy-on-read.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-copy-on-read.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-detect-zeroes.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-detect-zeroes.args
index ea65141..24a1bf1 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-detect-zeroes.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-detect-zeroes.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-0.13 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 92d7a226-cfae-425b-a6d3-00bbf9ec5c9e \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-discard.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-discard.args
index ab016ea..e3e62ac 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-discard.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-discard.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-0.13 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 92d7a226-cfae-425b-a6d3-00bbf9ec5c9e \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-error-policy-enospace.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-error-policy-enospace.args
index 79a8324..9b68e85 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-error-policy-enospace.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-error-policy-enospace.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-error-policy-stop.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-error-policy-stop.args
index df5ac59..b3e22e4 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-error-policy-stop.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-error-policy-stop.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-error-policy-wreport-rignore.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-error-policy-wreport-rignore.args
index 1042943..480f921 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-error-policy-wreport-rignore.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-error-policy-wreport-rignore.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-fmt-qcow.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-fmt-qcow.args
index 5862916..bd571ab 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-fmt-qcow.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-fmt-qcow.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-gluster.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-gluster.args
index a7a1ae6..634ed75 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-gluster.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-gluster.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-iscsi-auth.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-iscsi-auth.args
index 66e2497..6fa0cee 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-iscsi-auth.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-iscsi-auth.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-iscsi-lun.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-iscsi-lun.args
index 270f3c3..fbe0b1c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-iscsi-lun.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-iscsi-lun.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-iscsi.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-iscsi.args
index c22d3d8..303e838 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-iscsi.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-iscsi.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-export.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-export.args
index 2c98291..512eb14 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-export.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-export.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-ipv6-export.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-ipv6-export.args
index 8a6e7e0..ff13031 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-ipv6-export.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-ipv6-export.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-ipv6.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-ipv6.args
index 5d8448a..156efcb 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-ipv6.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-ipv6.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-unix.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-unix.args
index 9d02919..4ac944e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-unix.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd-unix.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd.args
index 8ca8e84..8d2ea28 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-nbd.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd-auth-AES.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd-auth-AES.args
index 8312d3d..dd66388 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd-auth-AES.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd-auth-AES.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 file=/tmp/lib/domain--1-QEMUGuest1/master-key.aes \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd-auth.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd-auth.args
index c7912a6..1be5c26 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd-auth.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd-auth.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd-ipv6.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd-ipv6.args
index 4f54e24..c1e2833 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd-ipv6.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd-ipv6.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd.args
index 53bacedb..042a814 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-rbd.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-sheepdog.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-sheepdog.args
index 72780a7..1ab4b1c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-sheepdog.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-network-sheepdog.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-no-boot.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-no-boot.args
index 27c20cd..a364372 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-no-boot.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-no-boot.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-readonly-disk.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-readonly-disk.args
index 9a35d7b..2b8aeb6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-readonly-disk.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-readonly-disk.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-readonly-no-device.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-readonly-no-device.args
index 9a35d7b..2b8aeb6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-readonly-no-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-readonly-no-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-shared.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-shared.args
index b81e470..9ffffa8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-shared.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-drive-shared.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-floppy-tray-no-device-cap.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-floppy-tray-no-device-cap.args
index cb49412..314860b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-floppy-tray-no-device-cap.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-floppy-tray-no-device-cap.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-floppy-tray.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-floppy-tray.args
index cb49412..314860b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-floppy-tray.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-floppy-tray.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-floppy.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-floppy.args
index 8720781..b5f30c9 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-floppy.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-floppy.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-geometry.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-geometry.args
index e7fbd0a..34e9358 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-geometry.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-geometry.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-ide-drive-split.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-ide-drive-split.args
index 8adf82b..262f793 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-ide-drive-split.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-ide-drive-split.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-ide-wwn.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-ide-wwn.args
index 8b5ca32..2507f79 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-ide-wwn.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-ide-wwn.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-ioeventfd.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-ioeventfd.args
index 73b064c..9ffa437 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-ioeventfd.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-ioeventfd.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-0.13 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 8c273d77-39b0-47c4-9714-6dddcad56b88 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-iscsi.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-iscsi.args
index 66f1c7c..35c1151 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-iscsi.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-iscsi.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-many.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-many.args
index 86e1395..793c65a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-many.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-many.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-order.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-order.args
index f3729fb..b80d349 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-order.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-order.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-sata-device.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-sata-device.args
index b83bfc7..f47983a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-sata-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-sata-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-device-auto.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-device-auto.args
index f729b88..995d2ed 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-device-auto.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-device-auto.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-device.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-device.args
index f729b88..995d2ed 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-disk-split.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-disk-split.args
index 5bf5089..a63e0e3 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-disk-split.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-disk-split.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-disk-vpd.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-disk-vpd.args
index 9b41043..b92824e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-disk-vpd.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-disk-vpd.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-disk-wwn.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-disk-wwn.args
index eb0841a..bfb63d4 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-disk-wwn.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-disk-wwn.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-lun-passthrough.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-lun-passthrough.args
index 9a851d1..b88755d 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-lun-passthrough.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-lun-passthrough.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-megasas.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-megasas.args
index fce7b27..98f42d6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-megasas.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-megasas.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-mptsas1068.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-mptsas1068.args
index f53a398..41cc27d 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-mptsas1068.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-mptsas1068.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-virtio-scsi.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-virtio-scsi.args
index be30171..de84797 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-virtio-scsi.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-virtio-scsi.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-vscsi.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-vscsi.args
index d532bcf..4b706cb 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-vscsi.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-scsi-vscsi.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-serial.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-serial.args
index 91875bb..2cefdca 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-serial.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-serial.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-snapshot.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-snapshot.args
index 8d2a41c..dc3792b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-snapshot.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-snapshot.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-source-pool-mode.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-source-pool-mode.args
index a34f7e7..fd20b98 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-source-pool-mode.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-source-pool-mode.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-source-pool.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-source-pool.args
index 7ad458a..83ac599 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-source-pool.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-source-pool.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-usb-device-removable.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-usb-device-removable.args
index 7cda592..d002f99 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-usb-device-removable.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-usb-device-removable.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-usb-device.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-usb-device.args
index 03ef44f..4ac1a9c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-usb-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-usb-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-ccw-many.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-ccw-many.args
index c2358f2..3a4b207 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-ccw-many.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-ccw-many.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-ccw \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-ccw.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-ccw.args
index 7dc8a64..2881e90 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-ccw.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-ccw.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-ccw \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-s390.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-s390.args
index 8f08085..30aa47a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-s390.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-s390.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-virtio \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-ccw.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-ccw.args
index b53ce8c..f2cea48 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-ccw.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-ccw.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-ccw \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-cmd_per_lun.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-cmd_per_lun.args
index 9561965..aae148f 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-cmd_per_lun.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-cmd_per_lun.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 8 \
+-smp 8,sockets=8,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-ioeventfd.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-ioeventfd.args
index b37885d..26961af 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-ioeventfd.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-ioeventfd.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 8 \
+-smp 8,sockets=8,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-max_sectors.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-max_sectors.args
index 7a80207..dcff8b3 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-max_sectors.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-max_sectors.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 8 \
+-smp 8,sockets=8,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-num_queues.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-num_queues.args
index 339f78e..a605c06 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-num_queues.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio-scsi-num_queues.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 8 \
+-smp 8,sockets=8,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio.args b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio.args
index 8e7f7a3..b405242 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-disk-virtio.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-encrypted-disk-usage.args b/tests/qemuxml2argvdata/qemuxml2argv-encrypted-disk-usage.args
index 4371413..82f1f80 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-encrypted-disk-usage.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-encrypted-disk-usage.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496898a6-e6ff-f7c8-5dc2-3cf410945ee9 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-encrypted-disk.args b/tests/qemuxml2argvdata/qemuxml2argv-encrypted-disk.args
index 4371413..82f1f80 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-encrypted-disk.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-encrypted-disk.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496898a6-e6ff-f7c8-5dc2-3cf410945ee9 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-eoi-disabled.args b/tests/qemuxml2argvdata/qemuxml2argv-eoi-disabled.args
index d518c70..db14ac4 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-eoi-disabled.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-eoi-disabled.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,-kvm_pv_eoi \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-eoi-enabled.args b/tests/qemuxml2argvdata/qemuxml2argv-eoi-enabled.args
index b21a13c..ce964a6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-eoi-enabled.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-eoi-enabled.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,+kvm_pv_eoi \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-event_idx.args b/tests/qemuxml2argvdata/qemuxml2argv-event_idx.args
index 89247c5..f862362 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-event_idx.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-event_idx.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-0.13 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid bba65c0e-c049-934f-b6aa-4e2c0582acdf \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-fips-enabled.args b/tests/qemuxml2argvdata/qemuxml2argv-fips-enabled.args
index 27d888e..cff1a9a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-fips-enabled.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-fips-enabled.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -enable-fips \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-floppy-drive-fat.args b/tests/qemuxml2argvdata/qemuxml2argv-floppy-drive-fat.args
index 136408e..f5668d8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-floppy-drive-fat.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-floppy-drive-fat.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-fs9p-ccw.args b/tests/qemuxml2argvdata/qemuxml2argv-fs9p-ccw.args
index fbe864c..7c24490 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-fs9p-ccw.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-fs9p-ccw.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-ccw-virtio \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-fs9p.args b/tests/qemuxml2argvdata/qemuxml2argv-fs9p.args
index 4944032..02f3701 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-fs9p.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-fs9p.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-sdl-fullscreen.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-sdl-fullscreen.args
index 53e9288..70d4709 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-sdl-fullscreen.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-sdl-fullscreen.args
@@ -10,7 +10,7 @@ DISPLAY=:0.1 \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-sdl.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-sdl.args
index 64a3186..b911baa 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-sdl.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-sdl.args
@@ -10,7 +10,7 @@ DISPLAY=:0.1 \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-agent-file-xfer.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-agent-file-xfer.args
index 2ad3f68..88fa813 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-agent-file-xfer.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-agent-file-xfer.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-agentmouse.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-agentmouse.args
index efe1c56..08ebc20 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-agentmouse.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-agentmouse.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefconfig \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-auto-socket-cfg.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-auto-socket-cfg.args
index 61335b0..f19ace9 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-auto-socket-cfg.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-auto-socket-cfg.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-auto-socket.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-auto-socket.args
index 61335b0..f19ace9 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-auto-socket.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-auto-socket.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-compression.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-compression.args
index 275a88b..774a086 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-compression.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-compression.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-no-args.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-no-args.args
index 05ce743..86ef027 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-no-args.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-no-args.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-qxl-vga.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-qxl-vga.args
index 2517237..8f86ff9 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-qxl-vga.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-qxl-vga.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-sasl.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-sasl.args
index bf9045f..5ab7c9c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-sasl.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-sasl.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-socket.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-socket.args
index 26d0671..a1b618c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-socket.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-socket.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-timeout.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-timeout.args
index cead7d6..bab81ff 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-timeout.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-timeout.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=spice \
 -cpu core2duo,+ds,+acpi,+ss,+ht,+tm,+pbe,+ds_cpl,+vmx,+est,+tm2,+cx16,+xtpr,\
 +lahf_lm \
 -m 1024 \
--smp 2 \
+-smp 2,sockets=1,cores=2,threads=1 \
 -uuid 553effab-b5e1-2d80-dfe3-da4344826c43 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-f14/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-usb-redir.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-usb-redir.args
index 3f00da4..7d3146c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-usb-redir.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice-usb-redir.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefconfig \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice.args
index d6c5820..972dea9 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-spice.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-auto-socket-cfg.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-auto-socket-cfg.args
index cfa63b1..640b53b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-auto-socket-cfg.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-auto-socket-cfg.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-auto-socket.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-auto-socket.args
index 84ce727..10c8162 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-auto-socket.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-auto-socket.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-no-listen-attr.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-no-listen-attr.args
index f374cff..f2dc11e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-no-listen-attr.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-no-listen-attr.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-none.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-none.args
index 69d1991..649fd91 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-none.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-none.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-policy.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-policy.args
index eeca740..f18df4a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-policy.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-policy.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-remove-generated-socket.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-remove-generated-socket.args
index ea2e4d0..fd634f3 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-remove-generated-socket.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-remove-generated-socket.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-sasl.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-sasl.args
index 4c0f84e..ab30a48 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-sasl.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-sasl.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-socket.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-socket.args
index abf724c..aae7ade 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-socket.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-socket.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-tls.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-tls.args
index 4100fb7..f7f586a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-tls.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-tls.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-websocket.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-websocket.args
index 4969747..239f98e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-websocket.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc-websocket.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc.args b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc.args
index f374cff..f2dc11e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-graphics-vnc.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-pci-address-device.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-pci-address-device.args
index 47ecc2f..d37f729 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-pci-address-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-pci-address-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9466-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-pci-address.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-pci-address.args
index 4719a7d..405ee07 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-pci-address.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-pci-address.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9466-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-lsi-iscsi-auth.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-lsi-iscsi-auth.args
index ff6655f..35b69a9 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-lsi-iscsi-auth.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-lsi-iscsi-auth.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9466-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-lsi-iscsi.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-lsi-iscsi.args
index 5d03d52..b35e7b6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-lsi-iscsi.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-lsi-iscsi.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9466-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-lsi.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-lsi.args
index f605618..d52a1e5 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-lsi.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-lsi.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9466-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-readonly.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-readonly.args
index 13af7d3..e66c5db 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-readonly.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-readonly.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9466-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-virtio-iscsi-auth.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-virtio-iscsi-auth.args
index 42113c8..0ee9453 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-virtio-iscsi-auth.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-virtio-iscsi-auth.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9466-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-virtio-iscsi.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-virtio-iscsi.args
index d50fb3c..e256012 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-virtio-iscsi.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-virtio-iscsi.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9466-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-virtio-scsi.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-virtio-scsi.args
index 542c42e..0a01108 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-virtio-scsi.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-scsi-virtio-scsi.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9466-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-usb-address-device-boot.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-usb-address-device-boot.args
index ddf90c0..4d24cb4 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-usb-address-device-boot.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-usb-address-device-boot.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-usb-address-device.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-usb-address-device.args
index 7883c61..06187ec 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-usb-address-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-usb-address-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-usb-address.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-usb-address.args
index d1c3e8f..da409f6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-usb-address.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-usb-address.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-vfio-multidomain.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-vfio-multidomain.args
index 0027f41..d18387c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-vfio-multidomain.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-vfio-multidomain.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9466-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-vfio.args b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-vfio.args
index a71ebe8..59415d6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hostdev-vfio.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hostdev-vfio.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9466-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hotplug-base.args b/tests/qemuxml2argvdata/qemuxml2argv-hotplug-base.args
index 79aa270..1df7121 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hotplug-base.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hotplug-base.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 4096 \
--smp 4 \
+-smp 4,sockets=4,cores=1,threads=1 \
 -uuid d091ea82-29e6-2e34-3005-f02617b36e87 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-numa.args b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-numa.args
index 5c356ef..2eb006e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-numa.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-numa.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc-i440fx-2.3 \
 -m size=1048576k,slots=16,maxmem=1099511627776k \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -mem-prealloc \
 -mem-path /dev/hugepages2M/libvirt/qemu \
 -numa node,nodeid=0,cpus=0-1,mem=1024 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages.args b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages.args
index 5431709..3e8257b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 4096 \
--smp 4 \
+-smp 4,sockets=4,cores=1,threads=1 \
 -object memory-backend-file,id=ram-node0,prealloc=yes,\
 mem-path=/dev/hugepages1G/libvirt/qemu,size=1073741824,host-nodes=0-3,\
 policy=bind \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages2.args b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages2.args
index b5bcb81..c01a813 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages2.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages2.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -object memory-backend-file,id=ram-node0,prealloc=yes,\
 mem-path=/dev/hugepages2M/libvirt/qemu,size=268435456 \
 -numa node,nodeid=0,cpus=0,memdev=ram-node0 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages3.args b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages3.args
index 3a9d1d0..e3b016a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages3.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages3.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -object memory-backend-ram,id=ram-node0,size=268435456 \
 -numa node,nodeid=0,cpus=0,memdev=ram-node0 \
 -object memory-backend-file,id=ram-node1,prealloc=yes,\
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages5.args b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages5.args
index eb06e2a..e908c32 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages5.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages5.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 -m 1024 \
 -mem-prealloc \
 -mem-path /dev/hugepages2M/libvirt/qemu \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid ef1bdff4-27f3-4e85-a807-5fb4d58463cc \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages6.args b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages6.args
index bb702dc..49e673b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages6.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-pages6.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid ef1bdff4-27f3-4e85-a807-5fb4d58463cc \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-shared.args b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-shared.args
index 416a962..0204573 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hugepages-shared.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hugepages-shared.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 4096 \
--smp 4 \
+-smp 4,sockets=4,cores=1,threads=1 \
 -object memory-backend-file,id=ram-node0,prealloc=yes,\
 mem-path=/dev/hugepages1G/libvirt/qemu,size=1073741824,host-nodes=0-3,\
 policy=bind \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hugepages.args b/tests/qemuxml2argvdata/qemuxml2argv-hugepages.args
index edb01d6..361c8e5 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hugepages.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hugepages.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 -m 214 \
 -mem-prealloc \
 -mem-path /dev/hugepages2M/libvirt/qemu \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hyperv-off.args b/tests/qemuxml2argvdata/qemuxml2argv-hyperv-off.args
index 37a2af7..c268db1 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hyperv-off.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hyperv-off.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32 \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hyperv-panic.args b/tests/qemuxml2argvdata/qemuxml2argv-hyperv-panic.args
index d620792..c8bc6b3 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hyperv-panic.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hyperv-panic.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,hv_crash \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-hyperv.args b/tests/qemuxml2argvdata/qemuxml2argv-hyperv.args
index 32846a2..4903759 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-hyperv.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-hyperv.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 -cpu 'qemu32,hv_relaxed,hv_vapic,hv_spinlocks=0x2fff,hv_vpindex,hv_runtime,\
 hv_synic,hv_stimer,hv_reset,hv_vendor_id=KVM Hv' \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-input-usbmouse-addr.args b/tests/qemuxml2argvdata/qemuxml2argv-input-usbmouse-addr.args
index 6310585..08dc180 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-input-usbmouse-addr.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-input-usbmouse-addr.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-input-usbmouse.args b/tests/qemuxml2argvdata/qemuxml2argv-input-usbmouse.args
index df96e6a..f825054 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-input-usbmouse.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-input-usbmouse.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-input-usbtablet.args b/tests/qemuxml2argvdata/qemuxml2argv-input-usbtablet.args
index faf21d5..54f8d0c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-input-usbtablet.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-input-usbtablet.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-intel-iommu.args b/tests/qemuxml2argvdata/qemuxml2argv-intel-iommu.args
index 69e4490..fc64405 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-intel-iommu.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-intel-iommu.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-iothreads-disk-virtio-ccw.args b/tests/qemuxml2argvdata/qemuxml2argv-iothreads-disk-virtio-ccw.args
index 58168b9..5e001de 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-iothreads-disk-virtio-ccw.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-iothreads-disk-virtio-ccw.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-ccw \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -object iothread,id=iothread1 \
 -object iothread,id=iothread2 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-iothreads-disk.args b/tests/qemuxml2argvdata/qemuxml2argv-iothreads-disk.args
index df4a299..a984e99 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-iothreads-disk.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-iothreads-disk.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -object iothread,id=iothread1 \
 -object iothread,id=iothread2 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-iothreads-ids-partial.args b/tests/qemuxml2argvdata/qemuxml2argv-iothreads-ids-partial.args
index 49dbfba..c441620 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-iothreads-ids-partial.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-iothreads-ids-partial.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -object iothread,id=iothread5 \
 -object iothread,id=iothread6 \
 -object iothread,id=iothread1 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-iothreads-ids.args b/tests/qemuxml2argvdata/qemuxml2argv-iothreads-ids.args
index be89828..607fb0d 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-iothreads-ids.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-iothreads-ids.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -object iothread,id=iothread2 \
 -object iothread,id=iothread4 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-iothreads-virtio-scsi-ccw.args b/tests/qemuxml2argvdata/qemuxml2argv-iothreads-virtio-scsi-ccw.args
index edf49bf..402ecd7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-iothreads-virtio-scsi-ccw.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-iothreads-virtio-scsi-ccw.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-ccw \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -object iothread,id=iothread1 \
 -object iothread,id=iothread2 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-iothreads-virtio-scsi-pci.args b/tests/qemuxml2argvdata/qemuxml2argv-iothreads-virtio-scsi-pci.args
index bd83b27..a7921fd 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-iothreads-virtio-scsi-pci.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-iothreads-virtio-scsi-pci.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -object iothread,id=iothread1 \
 -object iothread,id=iothread2 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-iothreads.args b/tests/qemuxml2argvdata/qemuxml2argv-iothreads.args
index b24ec1e..c4521f2 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-iothreads.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-iothreads.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -object iothread,id=iothread1 \
 -object iothread,id=iothread2 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-kvm-features-off.args b/tests/qemuxml2argvdata/qemuxml2argv-kvm-features-off.args
index 37a2af7..c268db1 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-kvm-features-off.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-kvm-features-off.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32 \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-kvm-features.args b/tests/qemuxml2argvdata/qemuxml2argv-kvm-features.args
index 7d768fd..a7a7a3b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-kvm-features.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-kvm-features.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,kvm=off \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-kvm-pit-delay.args b/tests/qemuxml2argvdata/qemuxml2argv-kvm-pit-delay.args
index 1d7be2b..1d69797 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-kvm-pit-delay.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-kvm-pit-delay.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-kvm-pit-device.args b/tests/qemuxml2argvdata/qemuxml2argv-kvm-pit-device.args
index 5f04308..5ff60af 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-kvm-pit-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-kvm-pit-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-kvm.args b/tests/qemuxml2argvdata/qemuxml2argv-kvm.args
index 033c759..a522c09 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-kvm.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-kvm.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine pc-1.0,accel=kvm \
 -m 4096 \
--smp 4 \
+-smp 4,sockets=4,cores=1,threads=1 \
 -uuid d091ea82-29e6-2e34-3005-f02617b36e87 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-kvmclock+eoi-disabled.args b/tests/qemuxml2argvdata/qemuxml2argv-kvmclock+eoi-disabled.args
index 756c8a9..96b3c31 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-kvmclock+eoi-disabled.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-kvmclock+eoi-disabled.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,-kvmclock,-kvm_pv_eoi \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-kvmclock.args b/tests/qemuxml2argvdata/qemuxml2argv-kvmclock.args
index 954fbaa..50b0bd4 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-kvmclock.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-kvmclock.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,-kvmclock \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-luks-disks.args b/tests/qemuxml2argvdata/qemuxml2argv-luks-disks.args
index efb5cb0..270322f 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-luks-disks.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-luks-disks.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 file=/tmp/lib/domain--1-encryptdisk/master-key.aes \
 -M pc-i440fx-2.1 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496898a6-e6ff-f7c8-5dc2-3cf410945ee9 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-off-cap.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-off-cap.args
index 15593bf..caba979 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-off-cap.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-off-cap.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine s390-ccw-virtio,accel=tcg,aes-key-wrap=off \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-off-caps.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-off-caps.args
index 15593bf..caba979 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-off-caps.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-off-caps.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine s390-ccw-virtio,accel=tcg,aes-key-wrap=off \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-on-cap.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-on-cap.args
index c148fab..f5cbf07 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-on-cap.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-on-cap.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine s390-ccw-virtio,accel=tcg,aes-key-wrap=on \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-on-caps.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-on-caps.args
index c148fab..f5cbf07 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-on-caps.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-aeskeywrap-on-caps.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine s390-ccw-virtio,accel=tcg,aes-key-wrap=on \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-aliases1.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-aliases1.args
index be730de..5e2d0c0 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-aliases1.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-aliases1.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-0.11 \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-aliases2.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-aliases2.args
index c2ac8bb..07a6600 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-aliases2.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-aliases2.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-core-off.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-core-off.args
index 0610c2c..a6635a6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-core-off.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-core-off.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine pc,accel=tcg,dump-guest-core=off \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-core-on.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-core-on.args
index c62ca65..578ba6a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-core-on.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-core-on.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine pc,accel=tcg,dump-guest-core=on \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-off-cap.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-off-cap.args
index 7fdb827..21b12a0 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-off-cap.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-off-cap.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine s390-ccw-virtio,accel=tcg,dea-key-wrap=off \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-off-caps.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-off-caps.args
index 7fdb827..21b12a0 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-off-caps.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-off-caps.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine s390-ccw-virtio,accel=tcg,dea-key-wrap=off \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-on-cap.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-on-cap.args
index 63f6fd9..11ca96d 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-on-cap.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-on-cap.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine s390-ccw-virtio,accel=tcg,dea-key-wrap=on \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-on-caps.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-on-caps.args
index 63f6fd9..11ca96d 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-on-caps.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-deakeywrap-on-caps.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine s390-ccw-virtio,accel=tcg,dea-key-wrap=on \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-keywrap-none-caps.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-keywrap-none-caps.args
index 652eca2..187683c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-keywrap-none-caps.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-keywrap-none-caps.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine s390-ccw-virtio,accel=tcg \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-keywrap-none.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-keywrap-none.args
index 652eca2..187683c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-keywrap-none.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-keywrap-none.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine s390-ccw-virtio,accel=tcg \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-usb-opt.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-usb-opt.args
index 68078c6..96f8f6c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-usb-opt.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-usb-opt.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine pc,accel=tcg,usb=off \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-machine-vmport-opt.args b/tests/qemuxml2argvdata/qemuxml2argv-machine-vmport-opt.args
index 1f817cb..f7a6dcc 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-machine-vmport-opt.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-machine-vmport-opt.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine pc,accel=tcg,vmport=off \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-master-key.args b/tests/qemuxml2argvdata/qemuxml2argv-master-key.args
index de030eb..ec6b1ee 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-master-key.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-master-key.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 file=/tmp/lib/domain--1-QEMUGuest1/master-key.aes \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug-dimm-addr.args b/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug-dimm-addr.args
index 603bae2..beab50e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug-dimm-addr.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug-dimm-addr.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m size=219136k,slots=16,maxmem=1099511627776k \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -numa node,nodeid=0,cpus=0-1,mem=214 \
 -object memory-backend-file,id=memdimm0,prealloc=yes,\
 mem-path=/dev/hugepages2M/libvirt/qemu,size=536870912,host-nodes=1-3,policy=bind \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug-dimm.args b/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug-dimm.args
index a8a5527..c3b7afe 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug-dimm.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug-dimm.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m size=219136k,slots=16,maxmem=1099511627776k \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -numa node,nodeid=0,cpus=0-1,mem=214 \
 -object memory-backend-ram,id=memdimm0,size=536870912 \
 -device pc-dimm,node=0,memdev=memdimm0,id=dimm0 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug-ppc64-nonuma.args b/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug-ppc64-nonuma.args
index bb29cfd..8a85fb1 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug-ppc64-nonuma.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug-ppc64-nonuma.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pseries \
 -m size=1310720k,slots=16,maxmem=4194304k \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -object memory-backend-ram,id=memdimm0,size=536870912 \
 -device pc-dimm,memdev=memdimm0,id=dimm0 \
 -object memory-backend-ram,id=memdimm1,size=536870912 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug.args b/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug.args
index c4831ec..94b1773 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-memory-hotplug.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m size=219136k,slots=16,maxmem=1099511627776k \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -numa node,nodeid=0,cpus=0-1,mem=214 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-memtune-unlimited.args b/tests/qemuxml2argvdata/qemuxml2argv-memtune-unlimited.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-memtune-unlimited.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-memtune-unlimited.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-memtune.args b/tests/qemuxml2argvdata/qemuxml2argv-memtune.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-memtune.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-memtune.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-migrate-numa-unaligned.args b/tests/qemuxml2argvdata/qemuxml2argv-migrate-numa-unaligned.args
index 1c43ba2..a20e1c0 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-migrate-numa-unaligned.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-migrate-numa-unaligned.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 14338 \
--smp 32 \
+-smp 32,sockets=32,cores=1,threads=1 \
 -object memory-backend-ram,id=ram-node0,size=20482048,host-nodes=3,\
 policy=preferred \
 -numa node,nodeid=0,cpus=0,memdev=ram-node0 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-migrate.args b/tests/qemuxml2argvdata/qemuxml2argv-migrate.args
index 97d3684..742e29e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-migrate.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-migrate.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-minimal-msg-timestamp.args b/tests/qemuxml2argvdata/qemuxml2argv-minimal-msg-timestamp.args
index b43c4e6..8be1773 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-minimal-msg-timestamp.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-minimal-msg-timestamp.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-minimal.args b/tests/qemuxml2argvdata/qemuxml2argv-minimal.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-minimal.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-minimal.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-misc-acpi.args b/tests/qemuxml2argvdata/qemuxml2argv-misc-acpi.args
index 0386a12..4744b11 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-misc-acpi.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-misc-acpi.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-misc-disable-s3.args b/tests/qemuxml2argvdata/qemuxml2argv-misc-disable-s3.args
index 4222202..21c6322 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-misc-disable-s3.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-misc-disable-s3.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 8caaa98c-e7bf-5845-126a-1fc316bd1089 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-misc-disable-suspends.args b/tests/qemuxml2argvdata/qemuxml2argv-misc-disable-suspends.args
index 92d1b4a..224e0f3 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-misc-disable-suspends.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-misc-disable-suspends.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 8caaa98c-e7bf-5845-126a-1fc316bd1089 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-misc-enable-s4.args b/tests/qemuxml2argvdata/qemuxml2argv-misc-enable-s4.args
index db25fa9..61eba8c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-misc-enable-s4.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-misc-enable-s4.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 8caaa98c-e7bf-5845-126a-1fc316bd1089 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-misc-no-reboot.args b/tests/qemuxml2argvdata/qemuxml2argv-misc-no-reboot.args
index 0f5e504..cb5a707 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-misc-no-reboot.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-misc-no-reboot.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-misc-uuid.args b/tests/qemuxml2argvdata/qemuxml2argv-misc-uuid.args
index 0386a12..4744b11 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-misc-uuid.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-misc-uuid.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-mlock-off.args b/tests/qemuxml2argvdata/qemuxml2argv-mlock-off.args
index 6564cf3..508d139 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-mlock-off.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-mlock-off.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -m 214 \
 -realtime mlock=off \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-mlock-on.args b/tests/qemuxml2argvdata/qemuxml2argv-mlock-on.args
index b0b11e8..8db643d 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-mlock-on.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-mlock-on.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -m 214 \
 -realtime mlock=on \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-mlock-unsupported.args b/tests/qemuxml2argvdata/qemuxml2argv-mlock-unsupported.args
index 5de9ecb..a401b9a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-mlock-unsupported.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-mlock-unsupported.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-monitor-json.args b/tests/qemuxml2argvdata/qemuxml2argv-monitor-json.args
index 3411b26..2f82286 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-monitor-json.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-monitor-json.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496898a6-e6ff-f7c8-5dc2-3cf410945ee9 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-multifunction-pci-device.args b/tests/qemuxml2argvdata/qemuxml2argv-multifunction-pci-device.args
index 1388927..abb1694 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-multifunction-pci-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-multifunction-pci-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-name-escape.args b/tests/qemuxml2argvdata/qemuxml2argv-name-escape.args
index b59706c..04be5fe 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-name-escape.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-name-escape.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 bar=2/master-key.aes \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -chardev socket,id=charmonitor,path=/tmp/lib/domain--1-foo=1,,bar=2/monitor.sock,\
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-client.args b/tests/qemuxml2argvdata/qemuxml2argv-net-client.args
index ef5301e..f923a14 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-client.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-client.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-eth-ifname.args b/tests/qemuxml2argvdata/qemuxml2argv-net-eth-ifname.args
index b96c933..181eb3b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-eth-ifname.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-eth-ifname.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-eth-names.args b/tests/qemuxml2argvdata/qemuxml2argv-net-eth-names.args
index a2c3f87..745cf3e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-eth-names.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-eth-names.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-eth.args b/tests/qemuxml2argvdata/qemuxml2argv-net-eth.args
index b96c933..181eb3b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-eth.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-eth.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev-multidomain.args b/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev-multidomain.args
index 458eac4..d266a44 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev-multidomain.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev-multidomain.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev-vfio-multidomain.args b/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev-vfio-multidomain.args
index 99240dc..81fe791 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev-vfio-multidomain.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev-vfio-multidomain.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev-vfio.args b/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev-vfio.args
index bbeb057..eda2a91 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev-vfio.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev-vfio.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev.args b/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev.args
index 9cc8c27..04c6712 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-hostdev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-mcast.args b/tests/qemuxml2argvdata/qemuxml2argv-net-mcast.args
index 98ad8cf..30486db 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-mcast.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-mcast.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-server.args b/tests/qemuxml2argvdata/qemuxml2argv-net-server.args
index b0df20f..ba2b585 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-server.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-server.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-udp.args b/tests/qemuxml2argvdata/qemuxml2argv-net-udp.args
index e5b1514..4ab945e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-udp.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-udp.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-user.args b/tests/qemuxml2argvdata/qemuxml2argv-net-user.args
index 7a6605b..315cbeb 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-user.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-user.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-vhostuser-multiq.args b/tests/qemuxml2argvdata/qemuxml2argv-net-vhostuser-multiq.args
index 3229034..a136dba 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-vhostuser-multiq.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-vhostuser-multiq.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-vhostuser.args b/tests/qemuxml2argvdata/qemuxml2argv-net-vhostuser.args
index a9989b8..8356ef0 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-vhostuser.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-vhostuser.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-ccw.args b/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-ccw.args
index 4cec6b1..86b6add 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-ccw.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-ccw.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-ccw \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-device.args b/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-device.args
index ac72cbf..e04e66f 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-disable-offloads.args b/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-disable-offloads.args
index 1123b48..e525cf1 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-disable-offloads.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-disable-offloads.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-netdev.args b/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-netdev.args
index cd17800..a12d500 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-netdev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-netdev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-s390.args b/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-s390.args
index 3d95fe1..46ccbc9 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-s390.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-virtio-s390.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-virtio \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-net-virtio.args b/tests/qemuxml2argvdata/qemuxml2argv-net-virtio.args
index a3893fc..5186950 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-net-virtio.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-net-virtio.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-no-shutdown.args b/tests/qemuxml2argvdata/qemuxml2argv-no-shutdown.args
index 7f55f19..12fa43e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-no-shutdown.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-no-shutdown.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 496898a6-e6ff-f7c8-5dc2-3cf410945ee9 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-nographics-vga.args b/tests/qemuxml2argvdata/qemuxml2argv-nographics-vga.args
index 1d6c7e9..93ce4b2 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-nographics-vga.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-nographics-vga.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-nographics.args b/tests/qemuxml2argvdata/qemuxml2argv-nographics.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-nographics.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-nographics.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-nosharepages.args b/tests/qemuxml2argvdata/qemuxml2argv-nosharepages.args
index 62d09c9..0b45663 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-nosharepages.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-nosharepages.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -machine pc,accel=tcg,mem-merge=off \
 -m 215 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-numad-auto-memory-vcpu-cpuset.args b/tests/qemuxml2argvdata/qemuxml2argv-numad-auto-memory-vcpu-cpuset.args
index 23d4b2a..d732b04 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-numad-auto-memory-vcpu-cpuset.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-numad-auto-memory-vcpu-cpuset.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-numad-auto-memory-vcpu-no-cpuset-and-placement.args b/tests/qemuxml2argvdata/qemuxml2argv-numad-auto-memory-vcpu-no-cpuset-and-placement.args
index 23d4b2a..d732b04 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-numad-auto-memory-vcpu-no-cpuset-and-placement.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-numad-auto-memory-vcpu-no-cpuset-and-placement.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-numad-auto-vcpu-static-numatune.args b/tests/qemuxml2argvdata/qemuxml2argv-numad-auto-vcpu-static-numatune.args
index 23d4b2a..d732b04 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-numad-auto-vcpu-static-numatune.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-numad-auto-vcpu-static-numatune.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-numad-static-memory-auto-vcpu.args b/tests/qemuxml2argvdata/qemuxml2argv-numad-static-memory-auto-vcpu.args
index 23d4b2a..d732b04 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-numad-static-memory-auto-vcpu.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-numad-static-memory-auto-vcpu.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-numad.args b/tests/qemuxml2argvdata/qemuxml2argv-numad.args
index 23d4b2a..d732b04 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-numad.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-numad.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-numatune-auto-nodeset-invalid.args b/tests/qemuxml2argvdata/qemuxml2argv-numatune-auto-nodeset-invalid.args
index 23d4b2a..d732b04 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-numatune-auto-nodeset-invalid.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-numatune-auto-nodeset-invalid.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-numatune-auto-prefer.args b/tests/qemuxml2argvdata/qemuxml2argv-numatune-auto-prefer.args
index 71d8105..d873b88 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-numatune-auto-prefer.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-numatune-auto-prefer.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 64 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -numa node,nodeid=0,cpus=0,mem=64 \
 -uuid 9f4b6512-e73a-4a25-93e8-5307802821ce \
 -nographic \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-numatune-memnode-no-memory.args b/tests/qemuxml2argvdata/qemuxml2argv-numatune-memnode-no-memory.args
index bd1616e..ad024fb 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-numatune-memnode-no-memory.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-numatune-memnode-no-memory.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 64 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -object memory-backend-ram,id=ram-node0,size=33554432,host-nodes=3,\
 policy=preferred \
 -numa node,nodeid=0,cpus=0,memdev=ram-node0 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-numatune-memnode.args b/tests/qemuxml2argvdata/qemuxml2argv-numatune-memnode.args
index 08d672d..bcd49d8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-numatune-memnode.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-numatune-memnode.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 24105 \
--smp 32 \
+-smp 32,sockets=32,cores=1,threads=1 \
 -object memory-backend-ram,id=ram-node0,size=20971520,host-nodes=3,\
 policy=preferred \
 -numa node,nodeid=0,cpus=0,memdev=ram-node0 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-numatune-memory.args b/tests/qemuxml2argvdata/qemuxml2argv-numatune-memory.args
index 23d4b2a..d732b04 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-numatune-memory.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-numatune-memory.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-panic-double.args b/tests/qemuxml2argvdata/qemuxml2argv-panic-double.args
index 574e696..71ab7a7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-panic-double.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-panic-double.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,hv_crash \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-panic-no-address.args b/tests/qemuxml2argvdata/qemuxml2argv-panic-no-address.args
index c5345d0..caec159 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-panic-no-address.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-panic-no-address.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-panic.args b/tests/qemuxml2argvdata/qemuxml2argv-panic.args
index bf82d3a..7db4b4a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-panic.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-panic.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-parallel-parport-chardev.args b/tests/qemuxml2argvdata/qemuxml2argv-parallel-parport-chardev.args
index 1917dd0..b511f93 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-parallel-parport-chardev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-parallel-parport-chardev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-parallel-tcp-chardev.args b/tests/qemuxml2argvdata/qemuxml2argv-parallel-tcp-chardev.args
index 29aa5d0..cbca4f6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-parallel-tcp-chardev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-parallel-tcp-chardev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-parallel-tcp.args b/tests/qemuxml2argvdata/qemuxml2argv-parallel-tcp.args
index f40708d..fab1167 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-parallel-tcp.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-parallel-tcp.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pci-autoadd-addr.args b/tests/qemuxml2argvdata/qemuxml2argv-pci-autoadd-addr.args
index 1bd0e82..941ce97 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pci-autoadd-addr.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pci-autoadd-addr.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-1.2 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 3ec6cbe1-b5a2-4515-b800-31a61855df41 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pci-autoadd-idx.args b/tests/qemuxml2argvdata/qemuxml2argv-pci-autoadd-idx.args
index b35d9d9..7a8551b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pci-autoadd-idx.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pci-autoadd-idx.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-1.2 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 3ec6cbe1-b5a2-4515-b800-31a61855df41 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pci-autofill-addr.args b/tests/qemuxml2argvdata/qemuxml2argv-pci-autofill-addr.args
index d1cbe4a..b8071ea 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pci-autofill-addr.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pci-autofill-addr.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-1.2 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 3ec6cbe1-b5a2-4515-b800-31a61855df41 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pci-bridge-many-disks.args b/tests/qemuxml2argvdata/qemuxml2argv-pci-bridge-many-disks.args
index 1b3f0a4..c3ee9c7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pci-bridge-many-disks.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pci-bridge-many-disks.args
@@ -11,7 +11,7 @@ QEMU_AUDIO_DRV=none \
 -cpu qemu64,-kvmclock \
 -bios /usr/share/seabios/bios.bin \
 -m 3907 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 04872dc1-e1de-434b-ab21-e3e80e416349 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pci-expander-bus.args b/tests/qemuxml2argvdata/qemuxml2argv-pci-expander-bus.args
index 268a301..b608cf6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pci-expander-bus.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pci-expander-bus.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-i440fx-2.5 \
 -m 214 \
--smp 16 \
+-smp 16,sockets=2,cores=4,threads=2 \
 -numa node,nodeid=0,cpus=0-7,mem=107 \
 -numa node,nodeid=1,cpus=8-15,mem=107 \
 -uuid 3ec6cbe1-b5a2-4515-b800-31a61855df41 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pci-many.args b/tests/qemuxml2argvdata/qemuxml2argv-pci-many.args
index 0a3b4f7..f0e014c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pci-many.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pci-many.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-1.2 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 3ec6cbe1-b5a2-4515-b800-31a61855df41 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pci-rom.args b/tests/qemuxml2argvdata/qemuxml2argv-pci-rom.args
index 94d3135..9fc178b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pci-rom.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pci-rom.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9466-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pci-serial-dev-chardev.args b/tests/qemuxml2argvdata/qemuxml2argv-pci-serial-dev-chardev.args
index 908a686..d9634e3 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pci-serial-dev-chardev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pci-serial-dev-chardev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pcie-expander-bus.args b/tests/qemuxml2argvdata/qemuxml2argv-pcie-expander-bus.args
index 13f546c..2b89846 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pcie-expander-bus.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pcie-expander-bus.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 214 \
--smp 16 \
+-smp 16,sockets=2,cores=4,threads=2 \
 -numa node,nodeid=0,cpus=0-7,mem=107 \
 -numa node,nodeid=1,cpus=8-15,mem=107 \
 -uuid 11dbdcdd-4c3b-482b-8903-9bdb8c0a2774 \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pcie-root-port.args b/tests/qemuxml2argvdata/qemuxml2argv-pcie-root-port.args
index 8031ebc..35c2664 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pcie-root-port.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pcie-root-port.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 11dbdcdd-4c3b-482b-8903-9bdb8c0a2774 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pcie-root.args b/tests/qemuxml2argvdata/qemuxml2argv-pcie-root.args
index ade7acc..7ef03d3 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pcie-root.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pcie-root.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 11dbdcdd-4c3b-482b-8903-9bdb8c0a2774 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pcie-switch-downstream-port.args b/tests/qemuxml2argvdata/qemuxml2argv-pcie-switch-downstream-port.args
index d94dc23..500b366 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pcie-switch-downstream-port.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pcie-switch-downstream-port.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 11dbdcdd-4c3b-482b-8903-9bdb8c0a2774 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pcie-switch-upstream-port.args b/tests/qemuxml2argvdata/qemuxml2argv-pcie-switch-upstream-port.args
index ba2bba7..24d5f37 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pcie-switch-upstream-port.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pcie-switch-upstream-port.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 11dbdcdd-4c3b-482b-8903-9bdb8c0a2774 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pcihole64-q35.args b/tests/qemuxml2argvdata/qemuxml2argv-pcihole64-q35.args
index 7d3a070..ad28dde 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pcihole64-q35.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pcihole64-q35.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 11dbdcdd-4c3b-482b-8903-9bdb8c0a2774 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pcihole64.args b/tests/qemuxml2argvdata/qemuxml2argv-pcihole64.args
index 0d5ad06..992d889 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pcihole64.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pcihole64.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-1.2 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 3c7c30b5-7866-4b05-8a29-efebccba52a0 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pmu-feature-off.args b/tests/qemuxml2argvdata/qemuxml2argv-pmu-feature-off.args
index 92f05de..6fcd23f 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pmu-feature-off.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pmu-feature-off.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,pmu=off \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pmu-feature.args b/tests/qemuxml2argvdata/qemuxml2argv-pmu-feature.args
index 2af536c..5f648e6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pmu-feature.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pmu-feature.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,pmu=on \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-ppc-dtb.args b/tests/qemuxml2argvdata/qemuxml2argv-ppc-dtb.args
index 31a675c..b1e7410 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-ppc-dtb.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-ppc-dtb.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M ppce500 \
 -m 256 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 49545eb3-75e1-2d0a-acdd-f0294406c99e \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-ppc64-usb-controller-legacy.args b/tests/qemuxml2argvdata/qemuxml2argv-ppc64-usb-controller-legacy.args
index aafa621..bed5045 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-ppc64-usb-controller-legacy.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-ppc64-usb-controller-legacy.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pseries \
 -m 256 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-ppc64-usb-controller.args b/tests/qemuxml2argvdata/qemuxml2argv-ppc64-usb-controller.args
index 0711940..2ec2231 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-ppc64-usb-controller.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-ppc64-usb-controller.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pseries \
 -m 256 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-ppce500-serial.args b/tests/qemuxml2argvdata/qemuxml2argv-ppce500-serial.args
index 3f06787..7dba956 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-ppce500-serial.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-ppce500-serial.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M ppce500 \
 -m 256 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pseries-basic.args b/tests/qemuxml2argvdata/qemuxml2argv-pseries-basic.args
index aac325f..2839dea 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pseries-basic.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pseries-basic.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pseries \
 -m 512 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 1ccfd97d-5eb4-478a-bbe6-88d254c16db7 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pseries-cpu-compat.args b/tests/qemuxml2argvdata/qemuxml2argv-pseries-cpu-compat.args
index fdd8101..06595a2 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pseries-cpu-compat.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pseries-cpu-compat.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pseries \
 -cpu host,compat=power7 \
 -m 256 \
--smp 4 \
+-smp 4,sockets=4,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pseries-cpu-exact.args b/tests/qemuxml2argvdata/qemuxml2argv-pseries-cpu-exact.args
index b459e12..4d27f05 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pseries-cpu-exact.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pseries-cpu-exact.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pseries \
 -cpu POWER7_v2.3 \
 -m 512 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 1ccfd97d-5eb4-478a-bbe6-88d254c16db7 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pseries-cpu-le.args b/tests/qemuxml2argvdata/qemuxml2argv-pseries-cpu-le.args
index aac325f..2839dea 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pseries-cpu-le.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pseries-cpu-le.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pseries \
 -m 512 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 1ccfd97d-5eb4-478a-bbe6-88d254c16db7 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pseries-nvram.args b/tests/qemuxml2argvdata/qemuxml2argv-pseries-nvram.args
index 9cc8914..89e0e56 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pseries-nvram.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pseries-nvram.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pseries \
 -m 512 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 1ccfd97d-5eb4-478a-bbe6-88d254c16db7 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pseries-panic-missing.args b/tests/qemuxml2argvdata/qemuxml2argv-pseries-panic-missing.args
index aac325f..2839dea 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pseries-panic-missing.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pseries-panic-missing.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pseries \
 -m 512 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 1ccfd97d-5eb4-478a-bbe6-88d254c16db7 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pseries-panic-no-address.args b/tests/qemuxml2argvdata/qemuxml2argv-pseries-panic-no-address.args
index aac325f..2839dea 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pseries-panic-no-address.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pseries-panic-no-address.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pseries \
 -m 512 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 1ccfd97d-5eb4-478a-bbe6-88d254c16db7 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pseries-usb-default.args b/tests/qemuxml2argvdata/qemuxml2argv-pseries-usb-default.args
index 4d0af3f..251e786 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pseries-usb-default.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pseries-usb-default.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pseries \
 -m 512 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 1ccfd97d-5eb4-478a-bbe6-88d254c16db7 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pseries-usb-kbd.args b/tests/qemuxml2argvdata/qemuxml2argv-pseries-usb-kbd.args
index 5887616..8451283 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pseries-usb-kbd.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pseries-usb-kbd.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pseries \
 -m 512 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 1ccfd97d-5eb4-478a-bbe6-88d254c16db7 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pseries-usb-multi.args b/tests/qemuxml2argvdata/qemuxml2argv-pseries-usb-multi.args
index 46e8b02..50e273b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pseries-usb-multi.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pseries-usb-multi.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pseries \
 -m 512 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 1ccfd97d-5eb4-478a-bbe6-88d254c16db7 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pseries-vio-user-assigned.args b/tests/qemuxml2argvdata/qemuxml2argv-pseries-vio-user-assigned.args
index cc85a15..2525efc 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pseries-vio-user-assigned.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pseries-vio-user-assigned.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pseries \
 -m 512 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 2754dd7b-ac8a-4850-aec0-1f3fcd43235b \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pseries-vio.args b/tests/qemuxml2argvdata/qemuxml2argv-pseries-vio.args
index ba000a9..ddeb642 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pseries-vio.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pseries-vio.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pseries \
 -m 512 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 2754dd7b-ac8a-4850-aec0-1f3fcd43235b \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pv-spinlock-disabled.args b/tests/qemuxml2argvdata/qemuxml2argv-pv-spinlock-disabled.args
index 8f5f209..e678ffb 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pv-spinlock-disabled.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pv-spinlock-disabled.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,-kvm_pv_unhalt \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-pv-spinlock-enabled.args b/tests/qemuxml2argvdata/qemuxml2argv-pv-spinlock-enabled.args
index 66b816a..bcdeaf7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-pv-spinlock-enabled.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-pv-spinlock-enabled.args
@@ -10,7 +10,7 @@ QEMU_AUDIO_DRV=none \
 -M pc \
 -cpu qemu32,+kvm_pv_unhalt \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-q35-pm-disable-fallback.args b/tests/qemuxml2argvdata/qemuxml2argv-q35-pm-disable-fallback.args
index c7eafc5..deae687 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-q35-pm-disable-fallback.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-q35-pm-disable-fallback.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-q35-2.5 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 56f5055c-1b8d-490c-844a-ad646a1caaaa \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-q35-pm-disable.args b/tests/qemuxml2argvdata/qemuxml2argv-q35-pm-disable.args
index ec90851..871340f 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-q35-pm-disable.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-q35-pm-disable.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-q35-2.5 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 56f5055c-1b8d-490c-844a-ad646a1caaaa \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-q35-usb2-multi.args b/tests/qemuxml2argvdata/qemuxml2argv-q35-usb2-multi.args
index 9da845b..c9d4d2b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-q35-usb2-multi.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-q35-usb2-multi.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 11dbdcdd-4c3b-482b-8903-9bdb8c0a2774 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-q35-usb2-reorder.args b/tests/qemuxml2argvdata/qemuxml2argv-q35-usb2-reorder.args
index bd0cd55..1966de9 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-q35-usb2-reorder.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-q35-usb2-reorder.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 11dbdcdd-4c3b-482b-8903-9bdb8c0a2774 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-q35-usb2.args b/tests/qemuxml2argvdata/qemuxml2argv-q35-usb2.args
index 5cca714..1d44e7a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-q35-usb2.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-q35-usb2.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 11dbdcdd-4c3b-482b-8903-9bdb8c0a2774 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-q35.args b/tests/qemuxml2argvdata/qemuxml2argv-q35.args
index 5cca714..1d44e7a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-q35.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-q35.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 2048 \
--smp 2 \
+-smp 2,sockets=2,cores=1,threads=1 \
 -uuid 11dbdcdd-4c3b-482b-8903-9bdb8c0a2774 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-commandline-ns0.args b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-commandline-ns0.args
index 21d2d83..afaa462 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-commandline-ns0.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-commandline-ns0.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-commandline-ns1.args b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-commandline-ns1.args
index 21d2d83..afaa462 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-commandline-ns1.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-commandline-ns1.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-commandline.args b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-commandline.args
index 21d2d83..afaa462 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-commandline.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-commandline.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-domain-commandline-ns0.args b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-domain-commandline-ns0.args
index 21d2d83..afaa462 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-domain-commandline-ns0.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-domain-commandline-ns0.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-domain-commandline.args b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-domain-commandline.args
index 21d2d83..afaa462 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-domain-commandline.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-domain-commandline.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-domain-ns0.args b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-domain-ns0.args
index 21d2d83..afaa462 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-domain-ns0.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-domain-ns0.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-no-env.args b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-no-env.args
index a26fb61..603af8b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-no-env.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns-no-env.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns.args b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns.args
index 7b4dbdf..9bb1b49 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-qemu-ns.args
@@ -11,7 +11,7 @@ BAR='' \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-reboot-timeout-disabled.args b/tests/qemuxml2argvdata/qemuxml2argv-reboot-timeout-disabled.args
index d975055..c69a3a0 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-reboot-timeout-disabled.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-reboot-timeout-disabled.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-reboot-timeout-enabled.args b/tests/qemuxml2argvdata/qemuxml2argv-reboot-timeout-enabled.args
index d7d4dd4..94013f0 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-reboot-timeout-enabled.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-reboot-timeout-enabled.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 6 \
+-smp 6,sockets=6,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-restore-v2-fd.args b/tests/qemuxml2argvdata/qemuxml2argv-restore-v2-fd.args
index 8b57976..0954c1a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-restore-v2-fd.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-restore-v2-fd.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-restore-v2.args b/tests/qemuxml2argvdata/qemuxml2argv-restore-v2.args
index 9cbe45b..2220522 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-restore-v2.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-restore-v2.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-s390-allow-bogus-usb-controller.args b/tests/qemuxml2argvdata/qemuxml2argv-s390-allow-bogus-usb-controller.args
index 261c842..0bd563e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-s390-allow-bogus-usb-controller.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-s390-allow-bogus-usb-controller.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-virtio \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-s390-allow-bogus-usb-none.args b/tests/qemuxml2argvdata/qemuxml2argv-s390-allow-bogus-usb-none.args
index 261c842..0bd563e 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-s390-allow-bogus-usb-none.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-s390-allow-bogus-usb-none.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-virtio \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-s390-panic-missing.args b/tests/qemuxml2argvdata/qemuxml2argv-s390-panic-missing.args
index f2eec5b..a18b5a5 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-s390-panic-missing.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-s390-panic-missing.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-ccw-virtio \
 -m 256 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 9aa4b45c-b9dd-45ef-91fe-862b27b4231f \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-s390-panic-no-address.args b/tests/qemuxml2argvdata/qemuxml2argv-s390-panic-no-address.args
index 811991d..e49c8df 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-s390-panic-no-address.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-s390-panic-no-address.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-ccw-virtio \
 -m 256 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 9aa4b45c-b9dd-45ef-91fe-862b27b4231f \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dac-none.args b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dac-none.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dac-none.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dac-none.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-baselabel.args b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-baselabel.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-baselabel.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-baselabel.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-labelskip.args b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-labelskip.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-labelskip.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-labelskip.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-override.args b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-override.args
index 074db7e..6cf8cd8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-override.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-override.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-relabel.args b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-relabel.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-relabel.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic-relabel.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic.args b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-dynamic.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-none.args b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-none.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-none.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-none.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-static-labelskip.args b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-static-labelskip.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-static-labelskip.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-static-labelskip.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-static-relabel.args b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-static-relabel.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-static-relabel.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-static-relabel.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-static.args b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-static.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-seclabel-static.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-seclabel-static.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-dev-chardev-iobase.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-dev-chardev-iobase.args
index ec23489..9d79fce 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-dev-chardev-iobase.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-dev-chardev-iobase.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-dev-chardev.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-dev-chardev.args
index bca3a3b..2b549c3 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-dev-chardev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-dev-chardev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-dev.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-dev.args
index 02adc23..7587eab 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-dev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-dev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-file-chardev.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-file-chardev.args
index b0e7907..b0b0297 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-file-chardev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-file-chardev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-file-log.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-file-log.args
index 38cad7b..72b33f2 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-file-log.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-file-log.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-file.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-file.args
index 30f6e68..298a57a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-file.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-file.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-many-chardev.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-many-chardev.args
index 1dc50ff..4248435 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-many-chardev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-many-chardev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-many.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-many.args
index e27aae6..8efc238 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-many.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-many.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-pty-chardev.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-pty-chardev.args
index e071b3f..0e7f26a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-pty-chardev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-pty-chardev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-pty.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-pty.args
index 9fea57f..1a63b9a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-pty.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-pty.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-spiceport-nospice.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-spiceport-nospice.args
index 60969e4..4ed60f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-spiceport-nospice.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-spiceport-nospice.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-spiceport.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-spiceport.args
index f05c3f2..54293bb 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-spiceport.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-spiceport.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefconfig \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp-chardev.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp-chardev.args
index 4f23b43..59efc87 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp-chardev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp-chardev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp-telnet-chardev.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp-telnet-chardev.args
index 8953217..9dfda3b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp-telnet-chardev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp-telnet-chardev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp-telnet.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp-telnet.args
index 84de29d..86bdc2c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp-telnet.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp-telnet.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp.args
index 982639e..e5fc807 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-tcp.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-udp-chardev.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-udp-chardev.args
index ef8c89c..4b25e4a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-udp-chardev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-udp-chardev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-udp.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-udp.args
index 236c2d1..7d12cd6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-udp.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-udp.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-unix-chardev.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-unix-chardev.args
index 057cf79..3324f38 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-unix-chardev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-unix-chardev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-unix.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-unix.args
index cd60b07..259a562 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-unix.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-unix.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-vc-chardev.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-vc-chardev.args
index ec31a07..e1371a9 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-vc-chardev.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-vc-chardev.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-serial-vc.args b/tests/qemuxml2argvdata/qemuxml2argv-serial-vc.args
index 797f45f..8798554 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-serial-vc.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-serial-vc.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-shmem.args b/tests/qemuxml2argvdata/qemuxml2argv-shmem.args
index 807bed3..89caf49 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-shmem.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-shmem.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-smartcard-controller.args b/tests/qemuxml2argvdata/qemuxml2argv-smartcard-controller.args
index beb2935..913a6b7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-smartcard-controller.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-smartcard-controller.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-smartcard-host-certificates.args b/tests/qemuxml2argvdata/qemuxml2argv-smartcard-host-certificates.args
index 72cf24b..f6ee9ed 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-smartcard-host-certificates.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-smartcard-host-certificates.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-smartcard-host.args b/tests/qemuxml2argvdata/qemuxml2argv-smartcard-host.args
index beb2935..913a6b7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-smartcard-host.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-smartcard-host.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-smartcard-passthrough-spicevmc.args b/tests/qemuxml2argvdata/qemuxml2argv-smartcard-passthrough-spicevmc.args
index cdca4c4..d4ebe43 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-smartcard-passthrough-spicevmc.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-smartcard-passthrough-spicevmc.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-smartcard-passthrough-tcp.args b/tests/qemuxml2argvdata/qemuxml2argv-smartcard-passthrough-tcp.args
index 0c526c8..e6034bd 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-smartcard-passthrough-tcp.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-smartcard-passthrough-tcp.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-smbios.args b/tests/qemuxml2argvdata/qemuxml2argv-smbios.args
index d32f065..34753d7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-smbios.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-smbios.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -smbios 'type=0,vendor=LENOVO,version=6FET82WW (3.12 )' \
 -smbios 'type=1,manufacturer=Fedora,product=Virt-Manager,version=0.8.2-3.fc14,\
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-sound-device.args b/tests/qemuxml2argvdata/qemuxml2argv-sound-device.args
index b084f4e..6735182 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-sound-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-sound-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-sound.args b/tests/qemuxml2argvdata/qemuxml2argv-sound.args
index d730310..0ee5c50 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-sound.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-sound.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-tpm-passthrough.args b/tests/qemuxml2argvdata/qemuxml2argv-tpm-passthrough.args
index 4fdede1..3cdd980 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-tpm-passthrough.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-tpm-passthrough.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-0.12 \
 -m 2048 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 11d7cd22-da89-3094-6212-079a48a309a1 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-controller-default-q35.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-controller-default-q35.args
index 7c33da2..f98f838 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-controller-default-q35.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-controller-default-q35.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 2048 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 11dbdcdd-4c3b-482b-8903-9bdb8c0a2774 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-controller-explicit-q35.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-controller-explicit-q35.args
index d24f9cd..5eb39ba 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-controller-explicit-q35.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-controller-explicit-q35.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M q35 \
 -m 2048 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid 11dbdcdd-4c3b-482b-8903-9bdb8c0a2774 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-controller-xhci.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-controller-xhci.args
index b91adc4..c50271d 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-controller-xhci.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-controller-xhci.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-controller.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-controller.args
index fa04c25..6936b83 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-controller.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-controller.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-hub-autoadd.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-hub-autoadd.args
index 12c9691..7467893 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-hub-autoadd.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-hub-autoadd.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-hub.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-hub.args
index 57019c1..2f1ceee 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-hub.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-hub.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-ich9-autoassign.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-ich9-autoassign.args
index db95851..1cda342 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-ich9-autoassign.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-ich9-autoassign.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-ich9-companion.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-ich9-companion.args
index b8de839..0274008 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-ich9-companion.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-ich9-companion.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-ich9-ehci-addr.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-ich9-ehci-addr.args
index 3e1d137..2290dc5 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-ich9-ehci-addr.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-ich9-ehci-addr.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-long-port-path.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-long-port-path.args
index d9100f6..2f29af7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-long-port-path.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-long-port-path.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-none.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-none.args
index 13ce783..a2eb6a9 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-none.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-none.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-piix3-controller.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-piix3-controller.args
index 297a36f..8c8648c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-piix3-controller.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-piix3-controller.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-port-autoassign.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-port-autoassign.args
index ac5cfdd..03803bd 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-port-autoassign.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-port-autoassign.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-port-missing.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-port-missing.args
index 56c0750..ff743c8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-port-missing.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-port-missing.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-ports.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-ports.args
index 6bf68fb..e63b1b6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-ports.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-ports.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-redir-boot.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-redir-boot.args
index bc47963..65c5417 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-redir-boot.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-redir-boot.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-redir-filter-version.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-redir-filter-version.args
index cf7a952..5fd9e4a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-redir-filter-version.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-redir-filter-version.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-redir-filter.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-redir-filter.args
index f191f35..3668ccc 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-redir-filter.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-redir-filter.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-redir.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-redir.args
index 0999c97..04a7a37 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-redir.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-redir.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb-xhci-autoassign.args b/tests/qemuxml2argvdata/qemuxml2argv-usb-xhci-autoassign.args
index 15a9d29..abcaeae 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb-xhci-autoassign.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb-xhci-autoassign.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-usb1-usb2.args b/tests/qemuxml2argvdata/qemuxml2argv-usb1-usb2.args
index b2d1489..c1dd5f7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-usb1-usb2.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-usb1-usb2.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-device-pciaddr-default.args b/tests/qemuxml2argvdata/qemuxml2argv-video-device-pciaddr-default.args
index 40937b8..3de081b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-device-pciaddr-default.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-device-pciaddr-default.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-0.15 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid cdbebdfa-1d6d-65c3-be0f-fd74b978a773 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-device-vgamem.args b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-device-vgamem.args
index e4c456f..f81fd99 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-device-vgamem.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-device-vgamem.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-device.args b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-device.args
index cd893df..fa2c505 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-heads.args b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-heads.args
index a939177..9678389 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-heads.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-heads.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-nodevice.args b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-nodevice.args
index cf096d7..92db6f8 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-nodevice.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-nodevice.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-noheads.args b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-noheads.args
index c609d48..84abe6b 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-noheads.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-noheads.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-sec-device-vgamem.args b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-sec-device-vgamem.args
index 45bd170..6e157e2 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-sec-device-vgamem.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-sec-device-vgamem.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-sec-device.args b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-sec-device.args
index b1fa2e3..7c7a0f1 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-sec-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-qxl-sec-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-vga-device-vgamem.args b/tests/qemuxml2argvdata/qemuxml2argv-video-vga-device-vgamem.args
index 6206dc0..a5c2509 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-vga-device-vgamem.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-vga-device-vgamem.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-vga-device.args b/tests/qemuxml2argvdata/qemuxml2argv-video-vga-device.args
index 4a03a12..d938393 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-vga-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-vga-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-vga-nodevice.args b/tests/qemuxml2argvdata/qemuxml2argv-video-vga-nodevice.args
index 4b82419..a266339 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-vga-nodevice.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-vga-nodevice.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-virtio-gpu-device.args b/tests/qemuxml2argvdata/qemuxml2argv-video-virtio-gpu-device.args
index d1c7e24..fefa2b6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-virtio-gpu-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-virtio-gpu-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-virtio-gpu-spice-gl.args b/tests/qemuxml2argvdata/qemuxml2argv-video-virtio-gpu-spice-gl.args
index edecca1..8844498 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-virtio-gpu-spice-gl.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-virtio-gpu-spice-gl.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=spice \
 -S \
 -M pc \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nodefaults \
 -monitor unix:/tmp/lib/domain--1-QEMUGuest1/monitor.sock,server,nowait \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-video-virtio-gpu-virgl.args b/tests/qemuxml2argvdata/qemuxml2argv-video-virtio-gpu-virgl.args
index bd9fdc8..6a55311 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-video-virtio-gpu-virgl.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-video-virtio-gpu-virgl.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-virtio-input-passthrough.args b/tests/qemuxml2argvdata/qemuxml2argv-virtio-input-passthrough.args
index aceb04a..287de66 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-virtio-input-passthrough.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-virtio-input-passthrough.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-virtio-input.args b/tests/qemuxml2argvdata/qemuxml2argv-virtio-input.args
index 8f6e4fc..9baefc4 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-virtio-input.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-virtio-input.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-virtio-lun.args b/tests/qemuxml2argvdata/qemuxml2argv-virtio-lun.args
index 11430c9..22df96f 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-virtio-lun.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-virtio-lun.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc-0.13 \
 -m 1024 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid bba65c0e-c049-934f-b6aa-4e2c0582acdf \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-ccw.args b/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-ccw.args
index bf39fb1..cf48768 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-ccw.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-ccw.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-ccw \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-default.args b/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-default.args
index 505d8cc..11b7e82 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-default.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-default.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-egd.args b/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-egd.args
index 2a3d196..3c069d7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-egd.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-egd.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-multiple.args b/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-multiple.args
index d68b32a..8f8159a 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-multiple.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-multiple.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-random.args b/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-random.args
index 5a4d47b..a613cd6 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-random.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-virtio-rng-random.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-watchdog-device.args b/tests/qemuxml2argvdata/qemuxml2argv-watchdog-device.args
index efc63c0..641f238 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-watchdog-device.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-watchdog-device.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-watchdog-diag288.args b/tests/qemuxml2argvdata/qemuxml2argv-watchdog-diag288.args
index b48c826..2997c12 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-watchdog-diag288.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-watchdog-diag288.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M s390-virtio \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefconfig \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-watchdog-dump.args b/tests/qemuxml2argvdata/qemuxml2argv-watchdog-dump.args
index dbc0929..a0a726c 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-watchdog-dump.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-watchdog-dump.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-watchdog-injectnmi.args b/tests/qemuxml2argvdata/qemuxml2argv-watchdog-injectnmi.args
index 0004807..6bf6f3d 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-watchdog-injectnmi.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-watchdog-injectnmi.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvdata/qemuxml2argv-watchdog.args b/tests/qemuxml2argvdata/qemuxml2argv-watchdog.args
index 49bfc38..fd5d4a7 100644
--- a/tests/qemuxml2argvdata/qemuxml2argv-watchdog.args
+++ b/tests/qemuxml2argvdata/qemuxml2argv-watchdog.args
@@ -9,7 +9,7 @@ QEMU_AUDIO_DRV=none \
 -S \
 -M pc \
 -m 214 \
--smp 1 \
+-smp 1,sockets=1,cores=1,threads=1 \
 -uuid c7a5fdbd-edaf-9455-926a-d65c16db1809 \
 -nographic \
 -nodefaults \
diff --git a/tests/qemuxml2argvtest.c b/tests/qemuxml2argvtest.c
index b1ff684..a9a3e6b 100644
--- a/tests/qemuxml2argvtest.c
+++ b/tests/qemuxml2argvtest.c
@@ -623,7 +623,6 @@ mymain(void)
             QEMU_CAPS_ICH9_AHCI,
             QEMU_CAPS_MACHINE_OPT,
             QEMU_CAPS_MACHINE_SMM_OPT,
-            QEMU_CAPS_SMP_TOPOLOGY,
             QEMU_CAPS_VIRTIO_SCSI);
     DO_TEST("machine-usb-opt", QEMU_CAPS_MACHINE_OPT,
             QEMU_CAPS_MACHINE_USB_OPT);
@@ -691,7 +690,6 @@ mymain(void)
             QEMU_CAPS_ICH9_AHCI,
             QEMU_CAPS_MACHINE_OPT,
             QEMU_CAPS_MACHINE_SMM_OPT,
-            QEMU_CAPS_SMP_TOPOLOGY,
             QEMU_CAPS_VIRTIO_SCSI);
     DO_TEST("clock-utc", QEMU_CAPS_NODEFCONFIG);
     DO_TEST("clock-localtime", NONE);
@@ -1343,7 +1341,7 @@ mymain(void)
     DO_TEST("qemu-ns", NONE);
     DO_TEST("qemu-ns-no-env", NONE);
 
-    DO_TEST("smp", QEMU_CAPS_SMP_TOPOLOGY);
+    DO_TEST("smp", NONE);
 
     DO_TEST("iothreads", QEMU_CAPS_OBJECT_IOTHREAD);
     DO_TEST("iothreads-ids", QEMU_CAPS_OBJECT_IOTHREAD);
@@ -1359,8 +1357,8 @@ mymain(void)
             QEMU_CAPS_VIRTIO_SCSI, QEMU_CAPS_VIRTIO_SCSI_IOTHREAD,
             QEMU_CAPS_VIRTIO_CCW, QEMU_CAPS_VIRTIO_S390);
 
-    DO_TEST("cpu-topology1", QEMU_CAPS_SMP_TOPOLOGY);
-    DO_TEST("cpu-topology2", QEMU_CAPS_SMP_TOPOLOGY);
+    DO_TEST("cpu-topology1", NONE);
+    DO_TEST("cpu-topology2", NONE);
     DO_TEST("cpu-topology3", NONE);
     DO_TEST("cpu-minimum1", QEMU_CAPS_KVM);
     DO_TEST("cpu-minimum2", QEMU_CAPS_KVM);
@@ -1371,14 +1369,13 @@ mymain(void)
     DO_TEST_FAILURE("cpu-nofallback", QEMU_CAPS_KVM);
     DO_TEST("cpu-strict1", QEMU_CAPS_KVM);
     DO_TEST("cpu-numa1", NONE);
-    DO_TEST("cpu-numa2", QEMU_CAPS_SMP_TOPOLOGY);
-    DO_TEST("cpu-numa-no-memory-element", QEMU_CAPS_SMP_TOPOLOGY);
+    DO_TEST("cpu-numa2", NONE);
+    DO_TEST("cpu-numa-no-memory-element", NONE);
     DO_TEST_PARSE_ERROR("cpu-numa3", NONE);
     DO_TEST_FAILURE("cpu-numa-disjoint", NONE);
     DO_TEST("cpu-numa-disjoint", QEMU_CAPS_NUMA);
-    DO_TEST_FAILURE("cpu-numa-memshared", QEMU_CAPS_SMP_TOPOLOGY,
-                    QEMU_CAPS_OBJECT_MEMORY_RAM);
-    DO_TEST_FAILURE("cpu-numa-memshared", QEMU_CAPS_SMP_TOPOLOGY);
+    DO_TEST_FAILURE("cpu-numa-memshared", QEMU_CAPS_OBJECT_MEMORY_RAM);
+    DO_TEST_FAILURE("cpu-numa-memshared", NONE);
     DO_TEST("cpu-host-model", NONE);
     DO_TEST("cpu-host-model-vendor", NONE);
     skipLegacyCPUs = true;
@@ -1413,7 +1410,7 @@ mymain(void)
     DO_TEST("cputune-zero-shares", NONE);
     DO_TEST_PARSE_ERROR("cputune-iothreadsched-toomuch", NONE);
     DO_TEST_PARSE_ERROR("cputune-vcpusched-overlap", NONE);
-    DO_TEST("cputune-numatune", QEMU_CAPS_SMP_TOPOLOGY,
+    DO_TEST("cputune-numatune",
             QEMU_CAPS_KVM,
             QEMU_CAPS_OBJECT_IOTHREAD,
             QEMU_CAPS_OBJECT_MEMORY_RAM,
-- 
2.10.0

