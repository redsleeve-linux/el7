From 85bcdfb34ed4520a7e63be7cebe8019dbeeecb56 Mon Sep 17 00:00:00 2001
Message-Id: <85bcdfb34ed4520a7e63be7cebe8019dbeeecb56@dist-git>
From: Martin Kletzander <mkletzan@redhat.com>
Date: Fri, 4 Nov 2016 10:29:31 +0100
Subject: [PATCH] qemuhotplugtest: Only read result_filename if used

Signed-off-by: Martin Kletzander <mkletzan@redhat.com>
(cherry picked from commit a41d87f42fce94e93d7439a88c2d67d61c84d105)

https://bugzilla.redhat.com/show_bug.cgi?id=1392031

Signed-off-by: Martin Kletzander <mkletzan@redhat.com>
---
 tests/qemuhotplugtest.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/tests/qemuhotplugtest.c b/tests/qemuhotplugtest.c
index 5f6b838..07b8091 100644
--- a/tests/qemuhotplugtest.c
+++ b/tests/qemuhotplugtest.c
@@ -239,7 +239,7 @@ testQemuHotplug(const void *data)
         virTestLoadFile(device_filename, &device_xml) < 0)
         goto cleanup;
 
-    if (test->action != UPDATE &&
+    if (test->action == ATTACH &&
         virTestLoadFile(result_filename, &result_xml) < 0)
         goto cleanup;
 
-- 
2.10.2

