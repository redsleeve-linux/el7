From a54d9e467e44533065475a0e01ca46577fe8e4e0 Mon Sep 17 00:00:00 2001
From: Jacco Ligthart <jacco@redsleeve.org>
Date: Thu, 12 Oct 2017 21:20:38 +0200
Subject: [PATCH] Roll in RedSleeve Branding

---
 SOURCES/thunderbird-redsleeve-default-prefs.js.el6 | 28 ++++++++++++++++++++++
 SOURCES/thunderbird-redsleeve-default-prefs.js.el7 | 28 ++++++++++++++++++++++
 SPECS/thunderbird.spec                             |  9 ++++---
 3 files changed, 62 insertions(+), 3 deletions(-)
 create mode 100644 SOURCES/thunderbird-redsleeve-default-prefs.js.el6
 create mode 100644 SOURCES/thunderbird-redsleeve-default-prefs.js.el7

diff --git a/SOURCES/thunderbird-redsleeve-default-prefs.js.el6 b/SOURCES/thunderbird-redsleeve-default-prefs.js.el6
new file mode 100644
index 0000000..fa9821b
--- /dev/null
+++ b/SOURCES/thunderbird-redsleeve-default-prefs.js.el6
@@ -0,0 +1,28 @@
+pref("app.update.enabled", false);
+pref("app.update.autoInstallEnabled", false);
+# Allow users to set custom colors
+# pref("browser.display.use_system_colors",   true);
+pref("general.useragent.vendor", " RedSleeve");
+pref("general.useragent.vendorSub", "THUNDERBIRD_RPM_VR");
+pref("intl.locale.matchOS", true);
+pref("mail.shell.checkDefaultClient", false);
+pref("toolkit.networkmanager.disable", false);
+pref("offline.autoDetect", true);
+
+# Disable global indexing by default
+pref("mailnews.database.global.indexer.enabled", false);
+
+# Do not switch to Smart Folders after upgrade to 3.0b4
+pref("mail.folder.views.version", "1")
+pref("extensions.shownSelectionUI", true);
+pref("extensions.autoDisableScope", 0);
+
+# For rhbz#1024232
+pref("ui.SpellCheckerUnderlineStyle",       1);
+
+/* Workaround for rhbz#1134876 */
+pref("javascript.options.baselinejit",      false);
+/* Workaround for rhbz#1110291 */
+pref("network.negotiate-auth.allow-insecure-ntlm-v1", true);
+/* Workaround for mozbz#1063315 */
+pref("security.use_mozillapkix_verification", false);
diff --git a/SOURCES/thunderbird-redsleeve-default-prefs.js.el7 b/SOURCES/thunderbird-redsleeve-default-prefs.js.el7
new file mode 100644
index 0000000..fa9821b
--- /dev/null
+++ b/SOURCES/thunderbird-redsleeve-default-prefs.js.el7
@@ -0,0 +1,28 @@
+pref("app.update.enabled", false);
+pref("app.update.autoInstallEnabled", false);
+# Allow users to set custom colors
+# pref("browser.display.use_system_colors",   true);
+pref("general.useragent.vendor", " RedSleeve");
+pref("general.useragent.vendorSub", "THUNDERBIRD_RPM_VR");
+pref("intl.locale.matchOS", true);
+pref("mail.shell.checkDefaultClient", false);
+pref("toolkit.networkmanager.disable", false);
+pref("offline.autoDetect", true);
+
+# Disable global indexing by default
+pref("mailnews.database.global.indexer.enabled", false);
+
+# Do not switch to Smart Folders after upgrade to 3.0b4
+pref("mail.folder.views.version", "1")
+pref("extensions.shownSelectionUI", true);
+pref("extensions.autoDisableScope", 0);
+
+# For rhbz#1024232
+pref("ui.SpellCheckerUnderlineStyle",       1);
+
+/* Workaround for rhbz#1134876 */
+pref("javascript.options.baselinejit",      false);
+/* Workaround for rhbz#1110291 */
+pref("network.negotiate-auth.allow-insecure-ntlm-v1", true);
+/* Workaround for mozbz#1063315 */
+pref("security.use_mozillapkix_verification", false);
diff --git a/SPECS/thunderbird.spec b/SPECS/thunderbird.spec
index 4366f22..b1103b8 100644
--- a/SPECS/thunderbird.spec
+++ b/SPECS/thunderbird.spec
@@ -75,7 +75,7 @@
 Summary:        Mozilla Thunderbird mail/newsgroup client
 Name:           thunderbird
 Version:        52.4.0
-Release:        2%{?dist}
+Release:        2%{?dist}.redsleeve
 URL:            http://www.mozilla.org/projects/thunderbird/
 License:        MPLv1.1 or GPLv2+ or LGPLv2+
 Group:          Applications/Internet
@@ -102,9 +102,9 @@ Source300:      gcc48-%{gcc_version}.el5.src.rpm
 Source301:      yasm-1.2.0-3.el5.src.rpm
 Source302:      devtoolset-2-binutils-2.23.52.0.1-10.el5.src.rpm
 Source600:      thunderbird.sh.in.rhel6
-Source601:      thunderbird-redhat-default-prefs.js.el6
+Source601:      thunderbird-redsleeve-default-prefs.js.el6
 Source700:      thunderbird.sh.in.rhel7
-Source701:      thunderbird-redhat-default-prefs.js.el7
+Source701:      thunderbird-redsleeve-default-prefs.js.el7
 
 # Mozilla (XULRunner) patches
 Patch0:         firefox-install-dir.patch
@@ -858,6 +858,9 @@ gtk-update-icon-cache %{_datadir}/icons/hicolor &>/dev/null || :
 #===============================================================================
 
 %changelog
+* Thu Oct 12 2017 Jacco Ligthart <jacco@redsleeve.org> - 52.4.0-2.redsleeve
+- Roll in RedSleeve Branding
+
 * Wed Oct  4 2017 Jan Horak <jhorak@redhat.com> - 52.4.0-2
 - Update to 52.4.0 (b2)
 
-- 
1.8.3.1

