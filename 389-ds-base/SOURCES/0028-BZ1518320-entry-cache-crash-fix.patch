From 12672d5bad1b1bbb71a281d33533b1829ab65fbc Mon Sep 17 00:00:00 2001
From: Mark Reynolds <mreynolds@redhat.com>
Date: Fri, 21 Jun 2019 10:15:19 -0400
Subject: [PATCH 2/2] BZ1518320 - entry cache crash fix

Description: Fix cherry-pick error
---
 ldap/servers/slapd/time.c | 26 --------------------------
 1 file changed, 26 deletions(-)

diff --git a/ldap/servers/slapd/time.c b/ldap/servers/slapd/time.c
index 2a3865858..584bd1e63 100644
--- a/ldap/servers/slapd/time.c
+++ b/ldap/servers/slapd/time.c
@@ -96,32 +96,6 @@ slapi_current_utc_time_hr(void)
     return ltnow;
 }
 
-struct timespec
-slapi_current_rel_time_hr(void)
-{
-    struct timespec now;
-    clock_gettime(CLOCK_MONOTONIC, &now);
-    return now;
-}
-
-void
-slapi_timespec_diff(struct timespec *a, struct timespec *b, struct timespec *diff)
-{
-    /* Now diff the two */
-    time_t sec = a->tv_sec - b->tv_sec;
-    int32_t nsec = a->tv_nsec - b->tv_nsec;
-
-    if (nsec < 0) {
-        /* It's negative so take one second */
-        sec -= 1;
-        /* And set nsec to to a whole value */
-        nsec = 1000000000 - nsec;
-    }
-
-    diff->tv_sec = sec;
-    diff->tv_nsec = nsec;
-}
-
 time_t
 slapi_current_utc_time(void)
 {
-- 
2.21.0

