From 9badd9fb4030534edb39e1ef7d35d7f9c0529f40 Mon Sep 17 00:00:00 2001
From: Jacco Ligthart <jacco@redsleeve.org>
Date: Sun, 13 Aug 2017 09:09:04 +0200
Subject: [PATCH] Roll in RedSleeve Branding

---
 SOURCES/sos-3.4-redsleeve-branding.patch | 57 ++++++++++++++++++++++++++++++++
 SPECS/sos.spec                           |  7 ++--
 2 files changed, 62 insertions(+), 2 deletions(-)
 create mode 100644 SOURCES/sos-3.4-redsleeve-branding.patch

diff --git a/SOURCES/sos-3.4-redsleeve-branding.patch b/SOURCES/sos-3.4-redsleeve-branding.patch
new file mode 100644
index 0000000..34caa32
--- /dev/null
+++ b/SOURCES/sos-3.4-redsleeve-branding.patch
@@ -0,0 +1,57 @@
+diff -uNrp sos-3.4.orig/sos/policies/redhat.py sos-3.4/sos/policies/redhat.py
+--- sos-3.4.orig/sos/policies/redhat.py	2017-08-09 22:26:42.179358997 +0000
++++ sos-3.4/sos/policies/redhat.py	2017-08-09 22:33:25.371349658 +0000
+@@ -34,9 +34,9 @@ except:
+ 
+ 
+ class RedHatPolicy(LinuxPolicy):
+-    distro = "Red Hat"
+-    vendor = "Red Hat"
+-    vendor_url = "http://www.redhat.com/"
++    distro = "RedSleeve"
++    vendor = "RedSleeve"
++    vendor_url = "http://www.redsleeve.org/"
+     _redhat_release = '/etc/redhat-release'
+     _tmp_dir = "/var/tmp"
+     _rpmq_cmd = 'rpm -qa --queryformat "%{NAME}|%{VERSION}\\n"'
+@@ -82,9 +82,9 @@ class RedHatPolicy(LinuxPolicy):
+ 
+     @classmethod
+     def check(cls):
+-        """This method checks to see if we are running on Red Hat. It must be
++        """This method checks to see if we are running on RedSleeve. It must be
+         overriden by concrete subclasses to return True when running on a
+-        Fedora, RHEL or other Red Hat distribution or False otherwise."""
++        Fedora, RHEL or other RedSleeve distribution or False otherwise."""
+         return False
+ 
+     def _container_init(self):
+@@ -132,15 +132,15 @@ class RedHatPolicy(LinuxPolicy):
+     def get_local_name(self):
+         return self.host_name()
+ 
+-# Container environment variables on Red Hat systems.
++# Container environment variables on RedSleeve systems.
+ ENV_CONTAINER = 'container'
+ ENV_HOST_SYSROOT = 'HOST'
+ 
+ 
+ class RHELPolicy(RedHatPolicy):
+-    distro = "Red Hat Enterprise Linux"
+-    vendor = "Red Hat"
+-    vendor_url = "https://access.redhat.com/support/"
++    distro = "RedSleeve Linux"
++    vendor = "RedSleeve"
++    vendor_url = "https://github.com/redsleeve-linux/"
+     msg = _("""\
+ This command will collect diagnostic and configuration \
+ information from this %(distro)s system and installed \
+@@ -204,7 +204,7 @@ No changes will be made to system config
+ 
+ 
+ class RedHatAtomicPolicy(RHELPolicy):
+-    distro = "Red Hat Atomic Host"
++    distro = "RedSleeve Atomic Host"
+     msg = _("""\
+ This command will collect diagnostic and configuration \
+ information from this %(distro)s system.
diff --git a/SPECS/sos.spec b/SPECS/sos.spec
index 7a5a241..d1f9d37 100644
--- a/SPECS/sos.spec
+++ b/SPECS/sos.spec
@@ -2,7 +2,7 @@
 Summary: A set of tools to gather troubleshooting information from a system
 Name: sos
 Version: 3.4
-Release: 6%{?dist}
+Release: 6%{?dist}.redsleeve
 Group: Applications/System
 Source0: https://github.com/sosreport/sos/archive/%{version}.tar.gz
 License: GPLv2+
@@ -28,7 +28,7 @@ Patch8: sos-bz1449904-ceph-tmp-mount-exclude.patch
 Patch9: sos-bz1393961-missing-filesystem-nonfatal.patch
 Patch10: sos-bz1400407-samba-dc-connect.patch
 Patch11: sos-bz1470573-tripleo-add-ui-logs.patch
-Patch12: sos-3.4-centos-branding.patch
+Patch12: sos-3.4-redsleeve-branding.patch
 
 %description
 Sos is a set of tools that gathers information about system
@@ -74,6 +74,9 @@ rm -rf ${RPM_BUILD_ROOT}
 %config(noreplace) %{_sysconfdir}/sos.conf
 
 %changelog
+* Sun Aug 13 2017 Jacco Ligthart <jacco@redsleeve.org> - 3.4-6.el7.redsleeve
+- Roll in RedSleeve Branding
+
 * Mon Jul 31 2017 CentOS Sources <bugs@centos.org> - 3.4-6.el7.centos
 - Roll in CentOS Branding
 
-- 
1.8.3.1

